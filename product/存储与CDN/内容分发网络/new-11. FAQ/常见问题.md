## 基本问题
**1. 腾讯云 CDN 有没有海外节点？**
腾讯云 CDN 目前已经具备海外加速能力。腾讯云 CDN 开放了腾讯十多年的节点累计，目前在海外 30 多个国家设置了 100 多个加速节点，已经具备海外加速能力。

**2. CDN 加速支持非 80 端口吗？**
目前 CDN 加速的端口支持 80、443、8080 三个端口。

**3. CDN 是否支持泛域名接入？**
CDN 目前已经支持泛域名接入,但需要通过认证。将腾讯云提供的验证文件上传至网站的根目录，验证成功后即可接入泛域名。

**4. CDN 加速节点上的缓存内容是实时更新的吗？**
不是实时更新的。CDN 节点根据您在控制台配置的缓存过期时间来更新缓存，若您需要实时更新某个文件的缓存，您可以通过刷新或者预热的手段来进行，详情参考 [缓存刷新](https://www.qcloud.com/doc/product/228/6299)。

**5. CDN 中间源是什么？**
CDN 中间源即中间源服务器，是位于业务服务器与 CDN 节点之间的一个中间层回源服务器。中间源对节点的回源请求进行了收敛，降低您源站的回源压力。

**6. CDN 支持 HTTPS 吗？**
腾讯云 CDN 目前已经全面支持 HTTPS。

**7. 接入 CDN 的域名有什么要求吗？**
接入 CDN 进行加速的域名，需要在工信部完成备案，且源站的业务内容必须合法。

**8. 接入 CDN 后，源站需要改造才能享受加速服务吗？**
基本不需要。但是为了能够达到更好的加速效果，我们建议您先做动静分离，动态文件和静态文件分配在不同域名下，仅需要对静态资源做加速。

**9. CDN 配置大概需要多久？**
CDN 配置时间一般不超过 30 分钟，若您设置后等待时间超过 30 分钟，您可及时提交工单联系我们协助您处理。

**10. CDN 自有源，可以设置不缓存某种文件吗？缓存时间设置成 0，是否就是不缓存？**
您可以按照目录和文件类型设置对应的缓存时间。若缓存时间设置为 0，即 CDN 节点不缓存该资源，用户每次发送访问请求至 CDN 节点时，CDN 节点都需回源站拉取相应资源。相关缓存设置可参照 [缓存过期配置](https://www.qcloud.com/doc/product/228/6290)。

**11. 在 CDN 管理下关闭接入域名，关闭后 CDN 节点上的文件会怎么样？**
若您关闭当前已接入 CDN 的域名的 CDN 服务，则 CDN 节点将会保留对应域名的接入配置，但不再产生 CDN 流量，该域名下的请求都将直接回源。在做此操作前，请确认：
- 您已将该域名的 CNAME 设置修改为对应 A 记录，否则该域名将无法访问。
- 您的源站带宽处理能力是否足够，否则会影响您域名的正常访问。

**12. 是否支持源站的 Cache-Control 设置？**
腾讯云 CDN 默认支持源站的 Cache-Control 设置。

**13. CDN 只能关闭，不能删除是什么原因？**
请检查用户是否是协作者身份，协作者的操作权限由 CDN 服务的创建者配置，若创建者未分配对应权限，则协作者无法进行操作。

**14. 托管源容量如何提升？**
为保证部分客户在使用托管源中，由于容量不足，导致无法及时上载相关数据，导致客户的业务上线受到一定影响。根据用户消费情况，执行以下消费带宽与容量对应的自动规则，达到相应消耗带宽，托管源容量将实现自动扩容：
- 针对已经扩容到对应等级容量的用户，监控容量超过 80%，提取客户近 30 天平均带宽，判断平均带宽是否符合升级要求，符合就启动对应策略执行扩容当前容量 50%。
- 如果客户在网不满 30 天，计算当前统计的平均带宽。
- 针对已经扩容到超多对应容量的客户，容量不收回，不扩容。
- 针对特殊需求，请提工单额外申请并说明申请缘由。

**15. 域名接入 CDN 之后，如何绑定 CNAME？**
您可以参考 [CNAME配置](https://www.qcloud.com/doc/product/228/3121) 文档中的操作说明，在您的 DNS 服务商处绑定 CNAME。

**16. 源站 IP 可以配置多个吗？**
您可配置多个源站 IP。当您配置了多个 IP 后，CDN 在回源请求时会随机访问所填 IP 中的某一个。当某一个IP回源失败次数超出阈值，该IP默认会隔离300秒，不再向此源站回源。

**17. CDN 刷新支持对目录刷新吗？**
目前 CDN 已经支持目录刷新和 URL 刷新。您可在腾讯云 CDN 控制台进行 [缓存刷新](https://console.cloud.tencent.com/cdn/refresh)，也可通过调用 api 方式进行刷新，详情请参考 [URL 刷新](https://www.qcloud.com/doc/product/228/3946) 。

** 18. 腾讯 CDN 支持跨域访问吗？**
腾讯云 CDN 在处理跨域访问时，是不做跨域限制的。如果用户网站需要跨域访问，在自身网站中配置 Access-Control-Allow-Origin 字段即可，您也可以选择在 CDN 对域名配置跨域头来实现跨域访问，详情请参考 [HTTP Header 配置](https://www.qcloud.com/doc/product/228/6296)。

## 故障排查
**1. 接入 CDN 之后网站打不开，如何排查？**
请先检查接入域名的 CDN 状态是否为“已关闭”，若为“已关闭”状态则对应网页无法打开。若非“已关闭”状态时，可按照下列步骤进一步检查：
+ 通过 ping 或 nslookup 检查该域名的 CNAME 解析是否已生效。
+ 检查源站是否能正常访问。

**2. 命中率低是什么原因呢？**
命中率低可能由以下原因造成：
+ 缓存配置问题，如缓存时间较短。
+ Http Header 导致无法缓存，请检查源站 Cache-Control 或 Expires 的设置。
+ 源站类型问题，可缓存的内容少。
+ 网站访问量低，过期时间短，命中的文件少，导致频繁回源。

**3. 如何判断用户访问的是哪个 CDN 节点？**
您可通过 nslookup 和 ping 命令可以获取用户访问的 CDN 节点的 IP 和延时丢包等基本的排错信息。

**4. 为什么同名文件节点返回的文件大小不一致？**
因为所有文件类型都默认缓存，CDN 节点上可能存在不同的文件版本。解决方法：
+ 强制刷新文件，立即更新缓存。
+ 带上版本号，例如： ```http://www.xxx.com/xxx.js?version=1```。
+ 更换其它文件名，不使用同名文件。

**5. 用户感觉 CDN 访问慢？**
大文件关注下载速度，小文件关注延时。首先得到用户访问慢的 URL，通过测速网站判断是否访问慢（推荐工具： 17ce http://www.17ce.com ）：
+  如果测速确实慢，而且是 FTP 托管源或 SVN 源，反馈到一线进行处理。
+  如果测速显示慢，源站属于自有源，协助用户排查源站机器负载和带宽是否受限。

**6. 如何判断用户访问是否命中 CDN Cache？**
查看访问回包头部的 X-Cache-Lookup 信息：![](https://mc.qcloudimg.com/static/img/64ac912c895b36f0241a927df6da3543/image.png)
+ X-Cache-Lookup:Hit From MemCache 表示命中 CDN 节点的内存。
+ X-Cache-Lookup:Hit From Disktank 表示命中 CDN 节点的磁盘。
+ X-Cache-Lookup:Hit From Upstream 表示没有命中 CDN。​

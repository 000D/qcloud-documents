## 结构化日志上传

**描述**

上传日志到指定的日志主题

**请求行**

```
POST /structuredlog
```

**请求示例**

```
POST /structuredlog?topic_id=xxxxxxxx-xxxx-xxxx-xxxx HTTP/1.1
Host: <Region>.cls.myqcloud.com
Authorization: <AuthorizationString>
Content-Type: application/x-protobuf

<LogGroupList 的pb格式打包内容>
```
**PB描述文件**

```
package cls;
message Log
{
    message Content
    {
        required string key   = 1;
        required string value = 2;
    }
    required int64   time     = 1; // UNIX Time Format
    repeated Content contents = 2;
}
message LogGroup
{
    repeated Log    logs        = 1;
    optional string contextFlow = 2; // 保持上下文用的UID
    optional string filename    = 3; // 文件名
    optional string source      = 4; // 日志来源，一般使用机器IP
}
message LogGroupList
{
    repeated LogGroup logGroupList = 1;
}
```

**请求头**

无特殊

**请求参数**

| 字段名        |  类型  | 位置  |是否必须 |      含义                                      |
|--------------|--------|------|--------|-----------------------------------------------|
| topic_id     | string | query| 是     |日志上报到的日志主题 id                            |
| logGroupList | message|  pb | 是     |日志内容相关                                     |

**LogGroup 说明**

| 字段名        |      含义                                      |
|--------------|-----------------------------------------------|
| logs         |日志内容                                        |
| contextFlow  |保持上下文用的 UID                                |
| filename     |文件名                                          |
| source       |日志来源，一般使用机器 IP                          |

**Log 说明**

| 字段名        |      含义                                      |
|--------------|-----------------------------------------------|
| time         |日志时间，unix 时间戳，单位 秒，注意一些语言得到的是毫秒级，要做转换 |
| contents     |日志内容                                        |

**Content 说明**

| 字段名        |      含义                                      |
|--------------|-----------------------------------------------|
| key          |字段的 key，不能以 ```_```开头                    |
| value        |字段的值                                        |

**返回示例**

```
HTTP/1.1 200 OK
Content-Length: 0

```

**响应头**

无特殊

**返回内容说明**

无

**错误码**

见错误码说明

![](//mc.qcloudimg.com/static/img/7156e8674b02fe38cf44b6b2fdcd58fb/image.png)
## 平台简介

信鸽（XG Push）是一款专业的移动 App 推送平台，支持百亿级的通知/消息推送，秒级触达移动用户，现已全面支持 Android 和 iOS 两大主流平台。

开发者可以方便地通过嵌入 SDK，通过 API 调用或者 Web 端可视化操作，实现对特定用户推送，大幅提升用户活跃度，有效唤醒沉睡用户，并实时查看推送效果。

## 推送场景定义

### 推送通知

在信鸽产品中，通知定义为 Android 和 iOS 开发者指南中的 Notification。服务器定向将信息实时送达手机，通过建立一条手机与服务器的连接链路，当有消息需要发送到手机时，通过此链路发送即可。

通过推送一条用户可见的信息，引导用户进行有目的性的操作。通常用于产品信息知会、新闻推送和个性化消息等场景。
![](//mc.qcloudimg.com/static/img/b569f541c780b40c09ab17d8e2ee46ae/image.png)
### 本地通知
本地通知定义为 Android 开发者指南中的 Local Notification。

应用通过自定义的日期、时间和消息内容，无需通过服务器即可向用户推送一条可见的信息。通常用于应用的某些本地定时提醒场景，游戏应用中建筑物升级结束的提醒，以及一些有明确结束时间的场景等。
![](//mc.qcloudimg.com/static/img/5e6f817951d4c0127d873803e5146e48/image.png)
更多请参考 [XGPushManager 提供信鸽服务的对外 API 列表](https://github.com/tencentyun/qcloud-documents/blob/master/product/%E7%A7%BB%E5%8A%A8%E4%B8%8E%E9%80%9A%E4%BF%A1/%E4%BF%A1%E9%B8%BD/Android%20%E6%8E%A5%E5%85%A5/Android%20SDK%20API/%E6%8E%A5%E5%8F%A3%E6%A6%82%E8%A7%88.md#xgpushmanager-功能类)
### 应用内消息
在信鸽产品中，我们支持通过推送可执行代码指令，让应用在后台进行一系列操作，通过此功能，可以用最小成本实现对应用的远程操控，推送的应用内消息内容由各个应用开发者自定义，并且消息不弹出通知栏。

应用内消息可以支持的场景非常广泛，可以任由开发人员扩展。

例如给部分标签用户进行消息命令推送，让应用在 WiFi 情况下自动下载安装包并静默升级至最新；快速增量更新应用，或让应用根据自身情况下载并静默增量更新，对于不需要更新的用户不造成干扰。

另外，应用内消息既可以展示在通知栏里，也可以直接做成 App 的消息中心，所以自由度比推送通知栏消息高出百倍。
![](//mc.qcloudimg.com/static/img/f3127b12f5b033803c7f39f7eb4488a7/image.png)![](//mc.qcloudimg.com/static/img/f16962e169adbbdce3441c95e190a109/image.png)
### 标签
在信鸽产品中，标签通常是指给某一群用户打上标签，例如在北京的喜爱美食的使用 iOS 的用户；超过 30 天未启动应用的沉睡用户；高消费潜力用户；团队测试用户等。

一个应用最多有 10000 个标签（tag），每个 token 在一个应用下最多 100 个标签（tag），标签（tag）中不准包含空格。

地理标签、应用版本、流失用户这三个标签，是信鸽默认提供的，可以直接使用。 
![](//mc.qcloudimg.com/static/img/dd7012aaa5f124e84db20967ceeca8ff/image.png)
### 账号
在信鸽产品中，别名/帐号通常是指给某特定用户推送消息。别名/帐号可以是终端在注册时上报的 QQ 号、openid、邮箱帐号、手机号等。

这里强调，若希望推送帐号，必须首先将账号与 token 进行绑定，否则将无法推送成功。绑定方式见 [Android、iOS 接入指南——根据帐号推送](http://docs.developer.qq.com/xg/android_access/api.html#绑定账号注册)。

目前一个帐号下，最多绑定 15 个设备 token，超出后会随机顶掉前面绑定的一个 token。 
![](//mc.qcloudimg.com/static/img/643897a0b559df65f41ac1a88452953a/image.png)
## 常见问题
** iOS SDK 中有没有使用热更新或者私有接口？**

信鸽 SDK 没有使用过热更新或私有接口，不会影响苹果审核。

**推送数量/推送频率限制？**

推送数量无限制。推送频率上，仅全量广播限频为每 3 秒一次，其他推送行为不限频。

**对单个设备，保存多少条离线信息？保存时间？**

离线消息 Android 最多保存 2 条，iOS 最多保存 1 条；保存时间最多 72 小时。

**标签方面限制？**

单个设备最多设置 100 个标签，单个 App 全局最多可以有 10000 个不同的标签。

**信鸽与腾讯开放平台的 APP ID 数据是否相通？**

当你在开放平台注册应用并使用信鸽后，应用的信息会自动从开放平台同步至信鸽平台，单独使用信鸽时不用重新接入应用。但是，在信鸽接入的应用不会同步至开放平台。

**当第一次注册成功后，没有反注册，以后使用还需要注册吗？**

不需要，只要没反注册，就不需要再次注册

**应用关闭或结束进程后，还能收到推送消息吗？**

信鸽推送主要依赖信鸽的 service 进行消息的收发，杀死进程之后信鸽 service 也被杀死，只能等待 service 被拉活或重启 App 才可以收到推送。若手机中有其他接入信鸽的 App 被打开，则可以利用其他 App 的 service 接收消息，但共享 service 通道也受手机 ROM 限制，无法保证百分之百的成功率。

**设备注册为什么收不到回调信息？**

注册操作中，后台只可能有三种出错行为：

1) 不响应；

2) 返回错误格式的数据包；

3) 返回错误码。这三种行为终端应该都可以检测到并给出回调。

**为什么我推送成功了，有了抵达量，点击量却等于 0 ？**

iOS 点击量统计需要调用特殊代码，具体请参考 iOS 开发文档。

**为什么会出现推送通知时，只有声音却没有文字信息的情况？**

该问题与系统有很大关系，需要拿设备的 logcat 来进行特定分析。

**token 与 Account 区别？**

token 是一台设备（device）的标识，账号是一个用户（users）的标识。一个 token 只能绑定一个账号，多次绑定时，以最后一次为准。

**账号在设备 A 上登录过，又在设备 B 上登录？给这个账号发信息会怎么样？**

只要是没有注销，则两台设备都会收到。

**标签与账号的区别？**

标签是用于标识一个 token 或用户的一些属性，如广东省、男性、游戏玩家等。帐号是用户的账号，请勿用标签作为别名使用。

**在应用列表中看到“覆盖设备数”，具体指的是什么？**

是指该应用下处于注册状态的设备数/终端数，同时也是该应用在推送时可以覆盖到的最大设备数。终端若调用了 unregister 的接口，覆盖设备数会减少。

**为什么在 Web 端推送出现服务器繁忙？**

请先检查 token 以及所选推送环境是否正确，然后检查证书是否正确提交，若还出现相同错误可重新制作一份不带密码的证书提交再试。

**推送过程中，非定时推送（立即推送）能否撤销？**

不能，只有返回 push_id 的任务才可以做撤销操作。

**推送后查看推送列表，已经推送完成了，状态却显示推送中，怎么办？**

刷新再试试。

**在推送时，如何向单个用户推送消息？**

请参考开发手册，有关于“推送消息给单个设备”和“推送消息给单个账户或别名”的使用指南。

**用户重连上线后收到多条 push 的顺序是怎样？**

按照消息 ID 递增。客户端也是按照此规则收取消息，因此，收消息的顺序就是发消息的顺序。

**我现在有安卓的用户和 iOS 的用户，那我 php 后台要写两个不同的接口分别推给安卓用户和 iOS 用户吗？**

需要调用两次推送接口，也可以把两个封装为一个。

**如果定时 push 选择的是过去的时间，是不是不会 push 出去？**

不是，选择过去的时间系统则会立刻发送。








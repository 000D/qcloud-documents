## 简介

客户端上传又被称为UGC上传（User Generated Content），是指用户把客户端上生成的视频（以及封面）直接上传到腾讯云。

## 上传原理

![](//mc.qcloudimg.com/static/img/2eecfa9e80c1d78cac545cae2bf3030c/image.png)

客户端上传主要涉及3个对象，分别是用户的APP服务器，腾讯云点播系统VOD和腾讯云存储系统COS。

#### 第一步：从APP服务器获取上传签名

客户端上传文件到腾讯云，VOD需要检查客户端的上传行为是否被APP服务器授权。因此，客户端在向VOD发起上传操作之前，必须从APP服务器获取上传签名。只有VOD校验签名并认为合法后，才允许进行后续的上传操作。

APP服务器生成签名的方式参照[客户端上传签名](/document/product/266/9221)。

特别注意：**千万不要**将API秘钥Secret ID和Secret Key暴露在客户端中，该信息泄露将导致严重的安全隐患。一般的，API密钥只允许由APP服务器保管。

#### 第二步：向VOD发起上传

客户端将文件上传到COS前，需要获知文件上传到COS的bucket，路径等信息。客户端向VOD执行发起上传请求，VOD就会为其分配文件上传到COS所需要的信息。

发起上传时，可以决定只上传视频（获得视频文件的COS信息），还是同时上传视频和封面（获得视频和封面文件的COS信息）。

#### 第三步：向COS上传文件

客户端获得文件上传到COS需要的信息后，按照COS的协议要求完成文件到COS的上传。

#### 第四步：向VOD确认上传

客户端成功上传文件到COS后，需要向VOD发起确认上传操作。执行确认上传后，VOD将返回客户端视频的播放地址（以及封面的展示地址），视频ID等信息，并按照用户的要求对上传后的视频进行转码、打水印、截图等一系列操作。

## 上传方式

### SDK

云点播为客户端上传提供了多种平台的SDK（[Android SDK](/document/product/266/9237)，[iOS SDK](/document/product/266/9238)和[Web SDK](/document/product/266/9239)）。

SDK为用户封装了上传VOD和COS的技术细节，上传流程中的第二、三、四步，只需调用SDK一个API即可全部完成。因此**强烈推荐**APP集成点播提供的SDK实现客户端上传。

### REST API

云点播还为客户端上传提供了REST API。如果客户端的平台不在SDK支持之列，可以通过调用REST API的方式实现文件上传。

目前VOD的REST API正在整理中，敬请期待。
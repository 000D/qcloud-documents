### 基本概念

* [实时音视频应用](#实时音视频应用)
    * [应用标识(sdkAppid)](#应用标识)
    * [帐号类型(accountType)](#帐号类型)
* [用户鉴权](#用户鉴权)
    * [用户标识(identifier)](#用户标识)
    * [用户签名(userSig)](#用户签名)
* [房间](#房间)
* [角色配置](#角色配置)
* [群组系统](#群组系统)

要使用实时音视频功能，首先需要在[腾讯云官网](https://cloud.tencent.com/product/trtc)完成服务开通。
![实时音视频](https://main.qcloudimg.com/raw/064ed162114ef632401ce20971470f39.png)

#### 实时音视频应用

开通实时音视频服务后，可以登录[腾讯云控制台](https://console.cloud.tencent.com/)，选择**实时音视频产品**，
通过**创建应用**按钮，创建一个**实时音视频应用**。
一个腾讯云帐号允许创建多个**实时音视频应用**。

创建后，可以拿到SDK中需要的**应用标识**(sdkAppid)和**帐号类型**(accountType)：
##### 应用标识
> 应用标识，也就是sdkAppId，是腾讯云后台用来区分不同APP的标识，在后台开通服务并且创建**实时音视频应用的**后，会自动为你的应用生成一个应用标识。

##### 帐号类型
> 账号类型，也就是accountType，是登录**实时音视频应用的**账号类型，也是在创建**实时音视频应用**后自动分配，用于用户鉴权功能。


#### 用户鉴权

##### 用户标识
> 用户标识，也就是identifer，用于在一个**实时音视频应用**中唯一标识一个用户

腾讯云的**用户标识**有以下特点:
- **用户标识**(identifier)是用户登录开发者系统的账号在腾讯云上的映射。开发者一般直接拿用户名当identifier。
- **用户标识**(identifier)长度建议不超过 32 字节。请使用英文字符和下划线，不能全为数字，大小写不敏感。

##### 用户签名
> 用户签名，也就是userSig，用于对一个用户进行鉴权认证，确认用户不是假冒的。

用户签名的生成:
开发者可以在自己的业务后台调用[实时音视频服务器sdk](https://cloud.tencent.com/document/product/268/7656)，为用户计算一个**用户签名**(userSig)，颁发给客户端并填入sdk中。
其中的私钥可以在腾讯云控制台下载:
![私钥](https://main.qcloudimg.com/raw/4c51d3cea6320be6c7a93b99b1196a40.png)
推荐的**用户签名**(userSig)获取流程:
![计算sig](https://main.qcloudimg.com/raw/a5e79bee89cd0aa33d988313bd0ea286.png)


注意:

- **用户签名**是有效期(在生成时设置，一般为三个月)的，超过期限的**用户签名**无法使用
- 用户使用**用户签名**过程中，**用户签名**过期，会出现被踢下线，sdk会上抛相应的事件通知(需要用户设置监听)


#### 房间

> 通常我将一个音视频空间称为房间，同一房间内的用户可以相互观看对方的实时视频。

我们用房间号来标识一个房间，即在同一个**实时音视频应用**中**房间号**相同的房间，可以认为是同一个**房间**。

实时音视频**房间**有以下特点:

- 实时音视频使用**房间**这个虚拟的概念，用于用户之间的相互隔离。
- **房间号**是开发者自行维护和分配的，是一个取值范围从1到10000000的数字。
- 只有在同一个**房间**里的用户可以相互看到音视频。
- 一个用户同时只能在一个**房间**内。如果要进入另一个**房间**，必须从前一个**房间**内退出，或者调用切换**房间**接口。

创建**房间**的注意事项：
- 第一个创建**房间**的用户即这个**房间**的所有者，但他无法主动解散这个**房间**。
- 如果所有的用户都退出了**房间**，30s后服务器也会自动解散这个**房间**。
- 当用户要加入的**房间**不存在的时候，实时音视频后台会先创建这个**房间**，然后再把用户加入。


#### 角色配置

##### 角色
> 在实时音视频中，我们将音视频相同的一套参数配置(包含分辨率、采集帧率等等)全集，称为角色。

##### 角色名
> 在视频云控制台中，为指定终端平台创建了一组参数配置后，可以给这组配置取一个名称，这个名称就是角色名。


用户在**房间**中打开摄像头/麦克风上行音视频流时，开始上行数据时，在进房时可以通过**角色名**指定使用的**角色**，来确定上行数据的参数。

用户需要先在[腾讯云控制后台](https://console.cloud.tencent.com/ilvb)可以为不同的终端平台，根据需要添加一组参数配置，并为这组配置起一个**角色名**。
![角色配置](https://main.qcloudimg.com/raw/40960a366306f6aa4a1da5b072e2c043.png)

注意:

- 如果进**房间**时配置的**角色名**并没有在控制台配置，不会导致进房失败，但会使用默认角色。
- 进入**房间**成功后，用户可以通过角色切换接口来切换**角色**
- 使用角色切换接口切换**角色**时，如果要切换的**角色名**不存在，会回抛一个失败的回调。
- 角色配置修改后，客户端需要重新登录才能够让配置生效(sdk会在登录成功后去后台拉取配置，若拉取失败也会导致**角色**找不到)


#### 群组系统

##### 群组
> 群组系统，本质上就是一个支持多人聊天的即时通讯系统，而群组就是一个多人可以相互聊天的空间，腾讯云的群组有五种类型: 私有群，公开群，聊天室，互动直播聊天室，在线成员广播大群

|类型|名称|最高支持成员数量|回收时间|适用场景|
|--|--|--|--|--|
|Private|私有群|200|30天|适用于较为私密的聊天场景，群组资料不公开，只能通过邀请的方式加入，类似于微信群|
|Public|公开群|2000|无|适用于公开群组，具有较为严格的管理机制、准入机制，类似于 QQ 群|
|ChatRoom|聊天室|10000|无|群成员可以随意进出，组织较为松散|
|AVChatRoom|互动直播聊天室|无限制|无|适用于实时音视频场景，管理上与聊天室相似，但群成员人数无上限；支持以游客身份（不登录）接收消息|
|BChatRoom|在线成员广播大群|无限制|无|适用于需要向全体在线用户推送消息的场景|

注意:

- **群组**和**房间**是两个完全独立的概念，两者之前没有直接关联



##### 消息
> 我们将一条独立发送接收的信息称为消息，iLiveSDK中消息用ILiveMessage类来描述，主要有三种类型: 文本消息，自定义消息，[其它消息](https://cloud.tencent.com/document/product/269/9232#1.2-.E6.96.87.E6.9C.AC.E6.B6.88.E6.81.AF.E5.8F.91.E9.80.81)
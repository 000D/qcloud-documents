## 概述
服务迁移是为方便用户迁移入云而研发的，通过服务迁移能将计算机磁盘中的操作系统、应用程序以及应用数据等迁移到腾讯云云服务器或云硬盘的便捷迁入工具，包含离线迁移、在线迁移等。其中离线迁移包括离线实例迁入和离线数据迁入。


## 操作
### 迁移前提
离线迁移需要腾讯云对象存储（COS）的支持，目前 COS 支持的地域有： 北京，上海，广州，成都，重庆，新加坡，香港，多伦多，法兰克福，孟买，首尔，硅谷，弗吉尼亚，曼谷，莫斯科。请确保您所在地域在以上范围内，具体请查看 [COS 可用地域](https://cloud.tencent.com/document/product/436/6224)。


### 迁移准备

> **注意：** 
> 目前腾讯云的服务迁移支持的镜像格式有：qcow2，vpc，vmdk，raw。建议使用压缩的镜像格式，可以节省传输和迁移的时间。

1. 请根据镜像制作文档制作一份需要迁移服务器的镜像文件。Windows 系统请参考 [Windows 镜像制作文档](https://cloud.tencent.com/document/product/213/17815)，Linux 系统请参考 [Linux 镜像制作文档](https://cloud.tencent.com/document/product/213/17814)。

> **注意：** 
> 上传镜像的 COS 地域需要与您将迁入的云主机地域保持一致。

2. 将制作的镜像文件上传到 COS。由于镜像文件一般较大，网页上传容易断线，建议使用 COSCMD 上传镜像，请参考 [COSCMD 工具文档](https://cloud.tencent.com/document/product/436/10976)。
3. 获取镜像上传的 COS 地址。在 COS 中，找到您刚刚上传好的镜像文件，并查看文件信息，获取文件链接。
4. 准备需要迁入的云服务器（CVM），购买请参考 [CVM](https://buy.cloud.tencent.com/cvm?tab=custom&step=1&regionId=8)。


### 离线实例迁移
1. 登录腾讯云，打开 [云服务器控制台](https://console.cloud.tencent.com/cvm/overview)，在左侧导航单击【服务迁移】>【离线实例迁移】。
 ![](https://main.qcloudimg.com/raw/3337617927dcf1e458d9334c77263cf9.png)
2. 单击【新建】，准备建立实例迁移任务；
3. 确认做好迁入准备之后，填写迁入配置之后单击【完成】，成功建立迁移任务；
![](https://main.qcloudimg.com/raw/6745cb4b3d278e10de716aa18686952c.png)
4. 查看迁移任务的进度。
![](https://main.qcloudimg.com/raw/f0b73d82610ab373f7589b59736a7431.png)


### 离线数据迁移
1. 登录腾讯云，打开 [云服务器控制台](https://console.cloud.tencent.com/cvm/overview)，在左侧导航单击【服务迁移】>【离线实例迁移】。
2. 单击【新建】，准备建立数据迁移任务；
3. 确认做好迁入准备之后，填写迁入配置之后单击【完成】，成功建立迁移任务；
![](https://main.qcloudimg.com/raw/4c7c046bb3230cd849b3b266ccafb0fe.png)



## 常见问题
1. 上传 COS 和迁移的耗时太久？
上传的耗时与镜像文件的大小、带宽的大小等因素有关。建议使用压缩的镜像格式，可以节省传输和迁移的时间。
>  导出的镜像为 raw 格式，建议转换为 qcow2 或 vhd。

2. 为什么迁移任务失败了？
 * 目前腾讯云的服务迁移支持的镜像格式有：qcow2，vpc，vmdk，raw，请确认您的格式满足上述之一。
 * 请确认您的镜像文件已经完整上传到 COS 中，并保证文件没有损坏。
 * 迁移需要保证目的云主机/云硬盘处于正常使用期，处于到期状态的设备将无法完成迁移。



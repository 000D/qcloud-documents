
## 密码与密钥
---
[TOC]
### 密码与密钥登录的区别？
SSH密钥是一种远程登录LInux服务器的方式，其原理是利用密钥生成器制作一对密钥（公钥和私钥）。将公钥添加到服务器，然后在客户端利用私钥即可完成认证并登录，这种方式更加注重数据的安全性，同时区别于传统密码登录方式的手动输入，又具有更高的便捷性。 
[登录Linux实例][1]（密码/密钥）？
[登录Windows实例][2]（密码）？

----------
### 使用密钥登录还可以同时使用密码登录吗？
用户使用 SSH 密钥对登录 Linux 实例，默认禁用密码登录，以提高安全性，所以密钥登录后用户将不能再使用密码登录。

----------
### 忘记密码怎么办？

用户可以按照控制台->云主机页面->重置密码步骤重置密码，然后使用新密码登录实例。

----------
### 如何创建密钥以及密钥丢失怎么办？
关于密钥的创建用户可以参考[SSH密钥][3]中的创建密钥部分，针对密钥丢失问题，我们提供两种方法解决：

 - 用户可以通过密钥控制台创建新的密钥，并使用新的密钥绑定原有实例，关于绑定请参考[密钥绑定/解绑请参考SSH密钥][4]。创建新的密钥后，用户可以在控制台->云主机页面->加载密钥，即可使用新的密钥登录实例。
 - 用户可以按照控制台->云主机页面->重置密码操作重置密码，然后使用新密码登录实例。
 
----------
### 密钥如何绑定/解绑服务器？
请参考[SSH密钥][5]中的密钥绑定/解绑服务器部分。

----------
### 如何修改SSH密钥名称和描述？
请参考[SSH密钥][6]中的修改名称和描述部分。

----------
### 如何删除SSH密钥？
请参考[SSH密钥][7]中的删除密钥部分。

----------
### SSH密钥有什么使用限制？
请参考[SSH密钥][8]中的使用限制部分。


----------
### 使用SSH密钥无法登录 Linux 实例，如何排查？
您可以参考以下解决方案：

 1. 在[控制台][9]中检查密钥是否与服务器绑定，具体操作是通过搜索密钥名称找到密钥ID，点击ID查看绑定该密钥的服务器。
 2. 在[控制台][10]取消或者修改安全组策略。详情请参考[安全组操作指南][11]。
 3. 在[控制台][12]取消密钥登录方式，或根据指导正确设置密钥验证登录机器。详情请参考[SSH密钥操作指南][13]。
 4. 使用 VNC 登录实例，查看网卡状态及 IP 配置信息是否正确。详情请参考参考[登录Linux实例操作指南][14]。
![此处输入图片的描述][15]
 5. 确认机器的 sshd 服务运行 OK，且端口等配置文件没有问题。
![此处输入图片的描述][16]
 6. 确认机器的 iptables 防火墙是否拦截，检查其策略是否 OK。
![此处输入图片的描述][17]
 7. 确认机器的 tcp_wrappers 是否有对 ssh 访问的拦截控制。
![此处输入图片的描述][18]
 8. 确认是否 ssh 登录机器的用户被 PAM 模块拦截登录（不常见）：
![此处输入图片的描述][19]
 9. 确认实例是否正确地运行在模式 3 或模式 5：
![此处输入图片的描述][20]


 


  [1]: https://cloud.tencent.com/document/product/213/5436
  [2]: https://cloud.tencent.com/document/product/213/5435
  [3]: https://cloud.tencent.com/document/product/213/16691
  [4]: https://cloud.tencent.com/document/product/213/16691
  [5]: https://cloud.tencent.com/document/product/213/16691
  [6]: https://cloud.tencent.com/document/product/213/16691
  [7]: https://cloud.tencent.com/document/product/213/16691
  [8]: https://cloud.tencent.com/document/product/213/6092
  [9]: https://console.cloud.tencent.com/cvm/sshkey
  [10]: https://console.cloud.tencent.com/cvm/securitygroup
  [11]: https://cloud.tencent.com/document/product/213/12450
  [12]: https://console.cloud.tencent.com/cvm/sshkey
  [13]: https://cloud.tencent.com/document/product/213/16691
  [14]: https://cloud.tencent.com/document/product/213/5436
  [15]: https://main.qcloudimg.com/raw/b9ce6489f2e7435bfbac584dfe5cfa4c.png
  [16]: https://main.qcloudimg.com/raw/09dd7d8f6fbabff263c21fa2d1a8c2b6.png
  [17]: https://main.qcloudimg.com/raw/5eefe5cb362295de20aed6ff27ff2acf.png
  [18]: https://main.qcloudimg.com/raw/a7d77683d3accd5ffe26a78d85928167.png
  [19]: https://main.qcloudimg.com/raw/5705a479962d9f91accd2c74d75f5447.png
  [20]: https://main.qcloudimg.com/raw/fa4a1a2aa10cfd34dfb4ce9202280b3c.png
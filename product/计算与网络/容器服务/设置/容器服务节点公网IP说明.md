
### NAT网关和弹性公网IP的使用

在默认的情况下，创建集群会为集群的节点分配公网IP。分配的公网IP将提供以下作用：

- 您可以通过公网IP登录到集群的节点机器。
- 创建服务时，容器如需拉取外网的Docker镜像，该容器所在节点必须拥有公网IP。
- 创建外网服务时，外网负载均衡使用的是节点的带宽和流量，若需提供外网服务，节点需要有外网带宽。


您在购买容器集群时不设置公网IP，将无法直接访问公网，无法通过Docker官方镜像来创建服务，如果您希望隐藏私有网络内主机的公网 IP 以避免暴露其网络部署，同时又希望访问公网，那么使用腾讯云NAT 网关可以满足这类需求，点击查看[NAT网关详细介绍](https://www.qcloud.com/document/product/215/4975)。以下介绍如何使用NAT网关和弹性公网IP来访问公网。

NAT网关和弹性公网IP是云主机访问Internet的两种方式，您可以选择其中一种或两种用于您的公网访问架构设计：

#### 方案一：只使用NAT网关
云主机不绑定弹性公网IP，所有访问Internet流量通过NAT网关转发。此种方案中，云主机访问Internet的流量会通过内网转发至NAT网关，因而不会受云主机购买时公网带宽的带宽上限限制，NAT网关产生的网络流量费用也不会占用云主机的公网带宽出口。
使用方法：
第一步：创建NAT网关
- 登录腾讯云控制台，选择【私有网络】选项卡，选择【NAT网关】。
- 点击左上角【新建】按钮，在弹出框中依次输入或确定以下参数：
- 选择结束后点击【确认】按钮，即可完成 NAT 网关的创建。
- 创建完 NAT 网关，您需要在私有网络控制台路由表页配置路由规则，以将子网流量指向 NAT 网关。
>注：NAT 网关创建时将会冻结 1 小时的租用费用。

#### 方案二：只使用弹性公网IP
云主机只绑定弹性公网IP，不使用NAT网关。此种方案，云主机所有访问Internet流量通过弹性公网IP出，会受到云主机购买时公网带宽的带宽上限限制。访问公网产生的相关费用，根据云主机网络计费模式而定。
使用方法：见[弹性公网IP操作指南](https://www.qcloud.com/document/product/215/4958#.E6.93.8D.E4.BD.9C.E6.8C.87.E5.8D.97)

#### 方案三：同时使用NAT网关和弹性公网IP
云主机绑定了弹性公网IP，同时所在子网路由访问Internet流量指向了NAT网关。此种方案中，所有云主机主动访问Internet的流量只通过内网转发至NAT网关，回包也经过NAT网关返回至云主机，此部分流量不会受云主机购买时公网带宽的带宽上限限制，NAT网关产生的网络流量费用不会占用云主机的公网带宽出口。如果来自Internet的流量主动访问云主机的弹性公网IP，则云主机回包统一通过弹性公网IP返回，这样产生的公网出流量收到云主机购买时公网带宽的带宽上限限制。访问公网产生的相关费用，根据云主机网络计费模式而定。
使用方法参加方案一和方案二

>注意：如果用户账号开通了带宽包共享带宽功能，则NAT网关产生的出流量按照带宽包整体结算（不再重复收取0.8元/GB的网络流量费），建议您限制NAT网关的出带宽，以避免因为NAT网关出带宽过高产生高额的带宽包费用。




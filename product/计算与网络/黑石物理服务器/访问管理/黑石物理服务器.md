[TOC]

## 概述
黑石物理服务器支持细化到实例级别的权限管理，您可以为同事分配管理特定物理服务器实例的权限；或者分配管理特定 VPC 或者 子网内所有物理服务器的权限。

## 预设策略

以下章节，我们将以创建一条【允许修改特定服务器别名】为例，帮助你了解如何创建黑石服务器的 CAM 策略。



## Action （动作）
本章节介绍黑石服务器的 Action 及其约束和限制


| Action      |   鉴权参数| 功能描述 |条件密钥|约束和限制|
| :-------- | --------:| :--: |
|bm:OfflineDevice               |qcs::bm:\$region:\$account:instance/$instanceId |退还后付费实例   |   bmvpc：unVpcId <br/> bmvpc : unSubnetId   |	    |
|bm:ModifyPayModePre2Post       |qcs::bm:\$region:\$account:instance/$instanceId |将设备从预付费转换为后付费   |   bmvpc：unVpcId <br/> bmvpc : unSubnetId   |     |
|bm:ModifyDeviceAutoRenewFlag   |qcs::bm:\$region:\$account:instance/$instanceId |设置物理机服务器自动续费标志  |    bmvpc：unVpcId <br/> bmvpc : unSubnetId |     |
|bm:GetDeviceDeployProcess      |qcs::bm:\$region:\$account:instance/$instanceId |机器部署重装进度查询   |   bmvpc：unVpcId <br/> bmvpc : unSubnetId  |     |
|bm:DescribeDevicePrice         |qcs::bm:\$region:\$account:instance/$instanceId |获取服务器的价格  |   bmvpc：unVpcId <br/> bmvpc : unSubnetId  |     |
|bm:DescribeDeviceHardwareInfo  |qcs::bm:\$region:\$account:instance/$instanceId |获取服务器的硬件配置信息 |  bmvpc：unVpcId <br/> bmvpc : unSubnetId   |     |
|bm:DescribeDevicePartition     |qcs::bm:\$region:\$account:instance/$instanceId |获取物理机的分区格式 |   bmvpc：unVpcId <br/> bmvpc : unSubnetId  |     |
|bm:BuyDevice                   |                 |购买物理机 |      |     |
|bm:GetDeviceOutBandInfo        |qcs::bm:\$region:\$account:instance/$instanceId |获取设备的带外信息 |  bmvpc：unVpcId <br/> bmvpc : unSubnetId   |     |
|bm:UnbindEip                   |qcs::bm:\$region:\$account:instance/$instanceId <br/>qcs::bmeip::uin/:eipId/$eipId   |解绑EIP |  bmvpc：unVpId <br/> bmvpc : unSubnetId   |     |
|bm:BindEip                     |qcs::bm:\$region:\$account:instance/$instanceId  <br/>qcs::bmeip::uin/:eipId/$eipId    |绑定EIP  |  bmvpc：nVpcId <br/> bmvpc : unSubnetId   |     |
|bm:ResetDevicePasswd           |qcs::bm:\$region:\$account:instance/$instanceId |重置密码 |  bmvpc：unVpcId <br/> bmvpc : unSubnetId   |     |
|bm:ReloadDeviceOs              |iqcs::bm:\$region:\$account:instance/$instanceId nstanceId       |重装操作系统  |bmvpc：unVpcId <br/> bmvpc : unSubnetId   |     |
|bm:DescribeDeviceOperationLog  |qcs::bm:\$region:\$account:instance/$instanceId |获取设备的操作日志 |  bmvpc：unVpcId <br/> bmvpc : unSubnetId   |     |
|bm:SetOutBandVPNAuthPwd        |                 |设置带外VPN认证用户密码  |      |     |
|bm:GetOutBandVPNAuthInfo       |                 |获取带外VPN认证信息 |      |     |
|bm:ModifyDeviceAlias           |qcs::bm:\$region:\$account:instance/$instanceId |批量修改设备名称	|    bmvpc：unVpcId <br/> bmvpc : unSubnetId |     
|bm:StartDevice                 |qcs::bm:\$region:\$account:instance/$instanceId |开机  |   bmvpc：unVpcId <br/> bmvpc : unSubnetId  |     |
|bm:RebootDevice                |qcs::bm:\$region:\$account:instance/$instanceId |重启机器  |    bmvpc：unVpcId <br/> bmvpc : unSubnetId |     |
|bm:ShutdownDevice              |qcs::bm:\$region:\$account:instance/$instanceId |关闭服务器  |    bmvpc：unVpcId <br/> bmvpc : unSubnetId |     |
|bm:DescribeDevice              |                 |获取物理服务器列表  |      |     |
|bm:DescribeDeviceWeb           |                 |获取黑石物理服务器列表(前台页面) |      |     |
|bm:RunUserCmd                  |                 |运行自定义脚本  |      |     |
|bm:GetUserCmdTaskDetail        |                 |查任务详细信息  |      |     |
|bm:GetUserCmdTaskDetailList    |                 |获取任务详细信息列表 |      |     |
|bm:GetUserCmdTaskList          |                 |获取任务列表  |      |     |
|bm:DeleteUserCmd               |                 |删除自定义脚本  |      |     |
|bm:GetUserCmd                  |                 |查自定义脚本内容 |      |     |
|bm:GetUserCmdList              |                 |查询自定义脚本列表 |      |     |
|bm:ModifyUserCmd               |                 |修改自定义脚本  |      |     |
|bm:AddUserCmd                  |                 |新建自定义脚本  |      |     |
|bm:DescribeDeviceTrash         |                 |获取黑石物理服务器回收站列表 |      |     |


书写规范为：`bm:API_NAME`，以下是所有可以用于授权的 Action 列表：
   


{
    "version": "2.0",
    "statement": [
        {
            "action": [
                "bm:Describe*",
                "bm:Get*"
            ],
            "resource": "*",
            "effect": "allow"
        }
    ]
}



## Resource（资源）

## Condtion (条件密钥）

CAM 中可授权的资源类型：

| 资源类型 | 授权策略中的资源描述方法 |
| :-------- | -------------- |
| 黑石物理服务器相关 |  ` qcs::bm:$region::instance/* `|

下表将介绍当前支持资源级权限的 BM （Bare Mental, 黑石物理服务器） API 操作，以及每个操作支持的资源和条件密钥。指定资源路径的时候，您可以在路径中使用 * 通配符。
> **注意**：
> 如果某一个 BM API 操作在下表中没有列出，则它不支持资源级权限。如果 BM API 操作不支持资源级权限，那么您还是可以向用户授予使用该操作的权限，但是必须为策略语句的资源元素指定 *  。

#### 云服务器实例相关：
| API操作 | 资源路径 | 条件密钥 |
| :-------- | :--------| :------ |
|ShutdownDevice|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|StartDevice|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|BindEip|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|UnbindEip|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|DescribeDeviceHardwareInfo|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|DescribeDeviceOperationLog|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|DescribeDevicePrice|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|DescribeDevicePartition|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|GetDeviceDeployProcess|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|GetDeviceOutBandInfo|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|ModifyPayModePre2Post|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|ModifyDeviceAutoRenewFlag|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|ShutdownDevice|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|OfflineDevice|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|RebootDevice|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|ReloadDeviceOs|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
|ResetDevicePasswd|qcs::bm:$region:$account:instance/* <br/> qcs::bm:$region:$account:instance/*|bm:unVpcId <br/> bm:unSubnetId|
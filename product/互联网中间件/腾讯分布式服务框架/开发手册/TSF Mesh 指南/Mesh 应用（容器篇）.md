快速体验 TSF Mesh 应用（通过容器部署），涉及到4个步骤：

1. 创建并部署 Mesh 应用
2. 创建服务并与 Mesh 应用关联
3. 验证服务调用



## 准备工作

前提条件：

1. 在 TSF 控制台上已创建容器集群并添加节点，参考 [集群](https://cloud.tencent.com/document/product/649/13684)。
2. 下载 TSF 提供的 [python 应用镜像]() （待补充）。
3. 用户的开发机上已安装 `docker` 环境，将用于推送镜像到镜像仓库。



## 一、创建并部署 Mesh 应用

### 1.1 创建应用
1. 登录 TSF 控制台。
2. 单击左侧导航【应用管理】。
3. 新建应用：
   - 应用名：填写应用名称

   - 部署方式：选择 **容器部署**  

   - 应用类型：选择 **Mesh 应用**

     ![](https://main.qcloudimg.com/raw/dc0c301e3b3829f486cff4ce580ab6f0.png)
4. 单击【提交】按钮。



### 1.2 将镜像推送到仓库

1. 单击【镜像】标签页。如果是首次使用，需要设置镜像仓库密码（该密码与腾讯云官网账号密码独立）。
2. 单击【使用指引】，根据指引中的命令将 python demo 应用的镜像推送到镜像仓库中。关于如何将镜像推送到仓库的操作方法参考 [镜像仓库使用指引](https://cloud.tencent.com/document/product/649/16695)。
  ![](https://main.qcloudimg.com/raw/c5fd709b9d3acbc6fc25f1c8bd8ebd5d.png)



### 1.3 创建部署组

在 TSF 平台上，使用部署组来部署应用，用户首先需要创建部署组，然后执行部署应用操作。

1. 在应用详情页内，单击【部署组】标签页。
2. 新建部署组：
   - 部署组名：填写部署组名称。
   - 集群：选择应用将部署的集群
   - 命名空间：选择命名空间属性
   - 日志配置项：可选择无。
     ![](https://main.qcloudimg.com/raw/0d8d32716de2d154e11b6260fb966abb.png)

3. 单击【提交】按钮。



### 1.4 部署应用

1. 单击部署组左侧的【部署应用】。
2. 填写部署相关信息，使用 **步骤二** 中仓库中的镜像。个字段含义可参考 [容器应用部署组-部署应用](https://cloud.tencent.com/document/product/649/15525#.E9.83.A8.E7.BD.B2.E5.BA.94.E7.94.A8)。

![](https://main.qcloudimg.com/raw/106c2e338203090f135163e0ccf68232.png)

3. 单击【提交】按钮，如果部署组状态变为运行中，表示应用部署成功。



## 二、创建服务并关联应用

1. 在 TSF 控制台上，单击左侧导航栏 【服务治理】。
2. 在页面顶部选择集群和命名空间。确保选中的集群和命名空间和 **步骤三** 中部署组的集群和命名空间属性相同。
3. 新建服务：
   - 服务名：填写服务名称。
   - 关联应用：选择 Mesh 应用，在应用列表中选择在 **步骤一** 中创建的应用。
   - 服务监听端口：协议选择 HTTP，端口可填写 8080。
   - 健康检查 URL：填写应用的健康检查 URL，用于检查应用是否正常运行。
     ![](https://main.qcloudimg.com/raw/ec8ddba3a0d6e0f3e799b21e8f0a0785.png)
4. 单击【提交】按钮。


## 三、验证服务调用

使用同样的步骤一和步骤二部署 `user`, `shop` 和 `promotion` 三个应用，并创建服务与应用关联。可以通过几种方式验证服务是否成功被 sidecar 代理。

- **服务治理** 界面：选择集群和命名空间后，如果服务列表中的服务状态为 **在线** 或 **单点在线**，表示服务被代理注册成功。如果服务提供者的请求量大于 0，表示服务提供者被服务消费者请求成功。
  ![](https://main.qcloudimg.com/raw/89040e8ddf377a1a9a972cac02b65037.png)
- **依赖拓扑** 界面：选择集群和命名空间后，调整时间范围覆盖服务运行期间的时间范围，正常情况下，将出现服务之间相互依赖的界面。
  ![](https://main.qcloudimg.com/raw/1920f22fe7365e16ede4057c4c7260d8.png)
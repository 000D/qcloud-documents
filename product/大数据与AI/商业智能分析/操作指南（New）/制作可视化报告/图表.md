

图表组件（Chart）是以图表的形式展现数据的载体。图表可以绑定任意一查询的多个字段。图表组件除了有表格组件支持的功能外， 还有自身特有的、更丰富的功能。

一个组数据系列采用什么形式（颜色，符号，形状，纹理）显示在图表上，被称作标记。支持的标记种类包括点图，线图，面积图，柱状图，饼图，雷达图，组织图，气泡，词云，矩形图，盒须图等。

为给图表支持丰富的交互，图表被划分为多个区域。大粒度来讲，可以分成 Title （标题）， Axis （轴）， Legend （图列）， Mark （标记）。另外还有一个图表对象的大底图，我们称为 Chart Area，它是整个图表的最外层容器。还有一个专门放标记的基址图，是在中间的部分，可以理解为所有标记的容器，或底图；我们称为 Plot Area。包含关系是，Chart Area 包含 Title， Axis， Plot， Legend。Plot 包含 Mark ， Grid line （网格线），  Target Line， Trend Line， Form （Annotation）等。大粒度的区域又可以包含小粒度的区域。例如，标题分 X 方向和 Y 方向。轴分成 Label， Tick， Line。图例分 Title，Item， Band 等， 标记又分不同类型的 Mark。

这个章节主要介绍如何创建图表，以及如何定义属性，如何绑定数据，和各种交互功能。



## 制作图表

### 创建图表

拖拽右侧面板-组件中的图表按钮到报告编辑区，则在报告中生成相应的图表。



### 绑定数据段

图表：把鼠标移动到图表内的 “ 单击以绑定数据 ” 图标，鼠标变成手状，单击则可打开图表的绑定界面。或者在图表的悬浮菜单栏中单击绑定数据按钮，打开图表的绑定界面。绑定界面包含三部分：查询树、美化界面以及图表的绑定窗口。在查询树中支持 Shift 键连续选中，以及 Ctrl 键不连续多选。

图表支持以下三种方式来绑定数据段：



#### X 轴或 Y 轴绑定

拖拽数据段到绑定窗口实现 X 轴或 Y 轴绑定，如图所示：



也可以拖拽数据段到绑定窗口替换绑定。

拖拽数据段到图表区域的 X 轴、Y 轴、图表展示区域实现绑定，初始状态的 X 轴和 Y 轴的划分区域如图所示，深灰色的是图表展示区域：



也可以拖拽数据段到 X 轴或者 Y 轴替换绑定。还可以拖拽数据段在 X 轴或 Y 轴插入绑定（可以插入到 X 轴数据段的顶部或底部或者插入到 Y 轴的左侧或者右侧），如图显示：



双击查询树列表的数据段实现绑定。



#### 标记组的绑定方法

1. 拖拽数据段到图表区域实现绑定 ( 标记组添加数据段的规则：数据绑定在标记组上，顺序为颜色、形状、大小、标签；如都绑定了字段，再进行拖拽到区域绑定，只在颜色上进行改变 )。如图所示：



1. 拖拽数据段到标记组窗口实现绑定。





### 移除数据段

移除绑定数据段，有以下三种方法：

- 绑定窗口的下拉列表中选择删除。
- 拖拽绑定窗口的数据段到查询树中实现移除。
- 拖拽绿色小三角到查询树中实现移除。如图所示：





## 切换图表类型

图表包括多种类型，如柱状图、线图、点图、雷达图、组织图等，下面详细介绍图表的类型。

切换图表类型的方式有两种，一种是通过右侧面板-常规-图表类型切换图表类型，另一种是直接单击切换图标更改图表类型。

1. 通过右侧面板-常规-图表类型切换图表类型：
2. 通过单击标记图标切换图表类型：

单击下图中红色框内区域。



弹出如下图所示的对话框，即可切换：





### 柱状图&3D 柱状图

柱状图用于显示一段时间内的数据变化或显示各项之间的比较情况。 在柱状图<img src="https://main.qcloudimg.com/raw/7535cbbb12ca85a0ad09515a0f70f6a1.png"  style="margin:0;">中，通常沿横坐标轴组织类别，沿纵坐标轴组织值。



3D 柱状图使用三维透视效果显示数据，使用隐藏的第三条数值轴。





### 堆积柱状图&3D堆积柱状图

堆积柱状图显示单个项目与总体的关系，并跨类别比较每个值占总体的百分比。堆积柱状图使用二维垂直堆积矩形显示值。当有多个数据系列并且希望强调总数值时，可以使用堆积柱状图。



3D 柱状图使用三维透视效果显示数据。



### 折线图

折线图可以显示随时间（根据常用比例设置）而变化的连续数据，因此非常适用于显示在相等时间间隔下数据的趋势。在折线图中，类别数据沿水平轴均匀分布，所有值数据沿垂直轴均匀分布。



### 堆积折线图

堆积折线图可用于显示各个值的分布随时间或排序的类别的变化趋势，但是由于看到堆积的线很难，因此请考虑改用其他折线图类型或者堆积面积图。



### 面积图

面积图强调数量随时间而变化的程度，也可用于引起人们对总值趋势的注意。例如，表示随时间而变化的利润的数据可以绘制在面积图中以强调总利润。



### 堆积面积图

通过显示所绘制的值的总和，面积图还可以显示部分与整体的关系。



### 点图

点图显示若干数据系列中各数值之间的关系，或者将两组数绘制为 xy 坐标的一个系列。

点图有两个数值轴，沿横坐标轴（x 轴）方向显示一组数值数据，沿纵坐标轴（y 轴）方向显示另一组数值数据。点图将这些数值合并到单一数据点并按不均匀的间隔或簇来显示它们。点图通常用于显示和比较数值，例如科学数据、统计数据和工程数据。



### 堆积点图

堆积点图可用于显示各个值的分布随时间或排序的类别的变化趋势，但是由于看到堆积的点很难，因此请考虑改用其他折线图类型或者堆积面积图。





### 饼图&3D饼图

饼图，只有 X 轴绑定度量字段或只有 Y 轴绑定度量字段。饼图显示一个数据系列 （数据系列：在图表中绘制的相关数据点，这些数据源自数据表的行或列。图表中的每个数据系列具有唯一的颜色或图案并且在图表的图例中表示。可以在图表中绘制一个或多个数据系列。饼图只有一个数据系列。）中各项的大小与各项总和的比例。饼图中的数据点 （数据点：在图表中绘制的单个值，这些值由条形、柱形、折线、饼图或圆环图的扇面、圆点和其他被称为数据标记的图形表示。相同颜色的数据组成一个数据系列。）显示为整个饼图<img src="https://main.qcloudimg.com/raw/d8b0059da223e1e87a3c3180255def81.png"  style="margin:0;">的百分比。



3D 饼图使用三维透视效果显示数据。



### 环状图

环状图，只有 X 轴绑定度量字段或只有 Y 轴绑定度量字段，可以绘制到环状图中。显示数据的方式和饼图一样。



### 地图

用户可通过地图来统计不同区域的销售等指标。

地图分为两种数据类型，一种是区域数据，一种是点数据，具体名称请参考下表。其中 ‘ 自定义 ’ 是用户提供的地图数据。



| 地理信息 | 区域数据   | 点数据      |

| -------- | ---------- | ----------- |

| 自定义   | 区域       | 点          |

| 世界大洲 | 大洲(区域) | 大洲(点)    |

| 世界国家 | 国家       | 市          |

| 世界省份 | 省         | 市          |

| 世界城市 | 市         | 市(点)      |

| 世界县城 | 县(区域)   | 县(点)      |

| 澳大利亚 | 州         | 市          |

| 法国     | 大区       | 省          |

| 加拿大   | 省         | 市          |

| 美国     | 州         | 郡          |

| 日本     | 地区       | 都/道/府/县 |

| 英国     | 地方       | 郡          |

| 中国     | 省         | 市          |



区域数据四两种渲染方式：区域渲染、点渲染、迁徙渲染、热力渲染，用户可在已绑定字段的下拉列表中选择渲染类型；而点数据不支持区域渲染，只能是点渲染、迁徙渲染、热力渲染。



#### 地图定位

地图中有两种方式来定位，通过经纬度来定位与通过地标来定位。

##### 通过经纬度来定位

经纬度接收的字段类型为处于维度和度量目录下的数值类型的字段。



如果是第一次绑定经纬度字段，会根据经纬度数据自动匹配相应的国家地区。

在绑定的度量字段的下拉列表中，可以设置地理信息，例如：世界国家，中国，美国等。

经纬度的数据类型为点数据，可以在绑定的度量字段的下拉列表中选择渲染方式：点渲染、迁徙选取或热力渲染。



##### 通过地标来定位

地标行接收的字段类型为字符串类型，在地标处绑定字段时，首先要将字段转换为地图列才能进行绑定，如下图所示：



若是用户第一次编辑地图列会弹出提示对话框：地图列是全局属性，继续修改？若选择 “ 是 ” 并勾选 “ 记住我的选择 ” 则修改属性并且以后将不再弹出此提示，若选择 “ 否 ” 则不修改。如果不慎误选了 “ 记住我的选择 ”，则需先退出产品再清除浏览器（cookie）缓存，即可。选择 “ 是 ” 打开地图列对话框，如图：



【地理信息】选择地图的地理信息，例如世界国家，世界省份，世界城市，世界县城（目前只包括中国地区），中国，美国等。

【地理数据】地图的匹配数据类型， ‘ 国家 ’ 是区域数据，有两种渲染方式：区域渲染和点渲染，用户可在已绑定字段的下拉列表中选择渲染类型。 ‘ 市 ’ 是点数据只能是点渲染。

【地理数据匹配】单击超链接【数据未匹配】，打开地理数据匹配对话框，进行数据匹配，如下图：





本产品提供了四种匹配算法，已匹配的数据将在地图中显示，数据全部匹配确定后，地图列对话框中的地理数据匹配项会变成数据已匹配，确定后，结果如下图所示：





【隐藏无数据区域】勾选后会优化地图展示范围，如图所示：



说明：地理数据匹配支持自动匹配：绑定地图列，或是打开报表时，如果地图列数据有更新，数据会自动进行匹配。



#### 渲染类型

用户可在已绑定字段的下拉列表中选择类型：区域渲染、点渲染、迁徙渲染、热力渲染。用户可选择世界或者某个特定国家的地图，展现形式为区域渲染、点渲染、迁徙渲染或热力渲染，迁徙渲染、热力渲染详见迁徙图、热力图。

世界地图且为区域渲染如下图所示：



中国地图且为点渲染如下图所示：



当地图选择的类型为点渲染的时候，可以将 map 上面的点标记为饼图，只需要在美化界面上绑定相应的字段，如下图所示：



#### 自定义地区数据

支持地理区域编组行为，可按大区显示（如华中、华南...），可对省、市等同级别的地理数据设定组合，变为一个区域进行展示。

自定义大区数据，需要在地图列对话框中设置地理数据为大区，此时出现自定义超链接，单击即可进入定义大区对话框中对数据进行编组，如下图所示：



地理信息不同时，可分别对该层次的数据进行编组：



##### 世界大洲

在地图列对话框中，设置地理信息为世界大洲，地理数据为大区，单击自定义进入定义大区对话框中：



  数据展示区域会将系统中世界大洲级别的数据展示出来。

【分组到】选中一个或多个数据，选择列表下的组名，将数据分组到该组下。

【分组到“其他”】勾选此选项会生成名称为 “其他” 的分组 , 如果有的数据没有进行分组，则会放到“其他” 分组下面。



数据展示区域会将系统中世界大洲级别的数据展示出来。

【分组到】选中一个或多个数据，选择列表下的组名，将数据分组到该组下。

【分组到“其他”】勾选此选项会生成名称为 “其他” 的分组 , 如果有的数据没有进行分组，则会放到“其他” 分组下面。

【新建分组】单击后会生成分组 , 默认名称是 分组 1, 分组 2......，新建后光标会选中并能修改分组名称。

【重命名】选中某个分组，单击重命名能够对分组修改名称。

【取消分组】选中某个分组，单击取消分组，当前分组被清除。

【重置】清除所有的分组。



##### 世界国家

在地图列对话框中，设置地理信息为世界国家，地理数据为大区，单击自定义进入定义大区对话框中：



##### 世界省份

在地图列对话框中，设置地理信息为世界省份，地理数据为大区，单击自定义进入定义大区对话框中：



此时需要选择国家，数据展示区域会展示出该国家的省份数据，设置分组后，可切换国家继续对数据进行编组。例如设置国家为中国：



##### 世界城市

在地图列对话框中，设置地理信息为世界城市，地理数据为大区，单击自定义进入定义大区对话框中：



此时需要选择国家、省，数据展示区域会展示出该省份的城市数据，对该省的城市分组后，可切换省份继续编组。例如设置国家为中国，省为河北：





##### 世界县城

在地图列对话框中，设置地理信息为世界县城，地理数据为大区，使用方法同世界城市：



##### 中国

在地图列对话框中，设置地理信息为中国，地理数据为大区，单击自定义按钮进入定义大区对话框中：



产品提供了中国的默认大区： 

- 东北：吉林、辽宁、黑龙江；
- 华东：上海、安徽、山东、江苏、浙江、福建；
- 华中：江西、河南、湖北、湖南；
- 华北：内蒙古、北京、天津、山西、河北；
- 华南：广东、广西、海南；
- 港澳台：台湾、澳门、香港；
- 西北：宁夏、新疆、甘肃、陕西、青海；
- 西南：云南、四川、西藏、贵州、重庆；



数据匹配后，就可以画出大区分组的中国地图，如图：



如果用户需要将中国按照自己设置的分组进行展示，可以对默认大区分组数据进行编辑。

> **说明：**澳大利亚、法国、加拿大、美国、日本、英国设置自定义大区时，使用方法同中国。





#### 地图钻取

Map 天生就存在着一定的层次（Hierarchy），比如一开始是全球，用户可以选中国，下钻，显示中国的各个省，选中广东，下钻，可以显示广东的各个城市，也可以通过上钻返回。地图的定义有两种，一种是通过地标列，另外一种是通过 x， y 经纬度的绑定，第一种才支持钻取，第二种无所谓上下层级关系，所以不支持。



当用户绑定带有层次的字段后，在地图上直接单击右键就可以直接上钻或者下钻，如下图所示：



大区也支持下钻，设置层次后，在地图上直接单击右键就可以进行钻取，如图所示：



#### 地图颜色

地图背景色是默认的灰色，数据区颜色可通过美化界面上的颜色进行修改。



### 盒须图

盒须图是一种显示数据分布情况的统计图，从中可以观察到数据的分布是否密集、是否具有偏向性、是否存在异常值。

创建盒须图，通常需要先将度量字段绑定到 X 轴或 Y 轴上，然后将维度字段绑定到分组或者标记组中。



### 热力图

热力图，支持自定义底图展示（散点图）、地图的热力图（自主地图）。通过热力图可以简单地聚合大量数据，并使用一种渐进的色带来表现，最终效果一般优于离散点的直接显示，可以很直观地展现空间数据的疏密程度或频率高低。

#### 制作热力图

##### 自定义底图

新建热力图，在X轴Y轴上绑定合适的字段；或者绑定数据后，单击绑定字段前的图标或通过字段下拉菜单中的图表类型 - 更多，转化为热力图，通常会在组件增加背景图片，说明分析的场景。



##### 地图热力渲染

- 通过地图列定位

绑定地图列后，打开绑定字段的下拉列表，转换为热力渲染。



- 通过经纬度定位

绑定经纬度后，打开绑定字段的下拉列表，转换为热力渲染。





#### 热力效果

提供了两种热力效果展示形式：彩虹热力展示，自定义渐变热力展示。选中热力图，在其右侧面板-设置中打开热力效果的下拉菜单，用户可根据自己的需要设置想要的热力展示效果。



彩虹热力展示：



定义渐变热力展示（设置颜色由绿色向蓝色渐变）：



### 迁徙图

地图支持了迁徙渲染，展示了数据目标在地图上的位置变化情况。可设置迁徙动画来添加动态迁徙效果。

#### 制作迁徙图

##### 数据准备

迁徙图支持地图列定位，也支持经纬度定位。但是迁徙图的数据需要两列。

- 地图列定位时的数据准备：



- 经纬度定位时的数据准备：



#### 创建迁徙图

- 通过地图列定位：

绑定地图列后，打开已绑定字段的下拉列表，选则迁徙渲染，X轴Y轴上展现出起始列与到达列，如图所示：



此时在起始列、到达列绑定数据就可生成迁徙图：



- 通过经纬度定位：

绑定经纬度后，打开已绑定字段的下拉列表，选择迁徙渲染，轴上绑定区域转换为起始列与到达列，如图所示：





绑定起始经度、起始纬度、到达经度、到达纬度后，即可生成迁徙图：





### 雷达图&填充雷达图

雷达图可只绑定度量，也可在轴上绑定维度来展示度量数据。

第一个轴以角度 90 度起。轴上只绑定度量时，会根据度量数进行等分；轴上既绑定了度量，又在对面绑定了维度，会根据维度数进行等分，逆时针分布所有的维度。

网格线将一直显示，如下图：



雷达图显示各值相对于中心点的变化，其中可能显示各个数据点的标记，也可能不显示这些标记。



在填充雷达图中，由一个数据系列覆盖的区域用一种颜色来填充。





### 气泡图

气泡图可用气泡的颜色、大小、数目等来形象的反映出仪表盘中数据的定量关系。

在标记组的颜色、大小、标签字段上绑定合适的值生成气泡图。或者先绑定字段到 X 轴或 Y 轴上，然后单击字段前面的图标或通过右侧面板-常规-图表类型 - 更多，转化为气泡图。



### 瀑布图

瀑布图<img src="https://main.qcloudimg.com/raw/b0a8c5b9495ecf3e78bad21f96a0468d.png"  style="margin:0;">可显示数据的累积效果，最后进行汇总。当用户需要对汇总的柱子进行大小或颜色等的调整时需要通过该柱子的右键菜单中相对应的属性或格式进行设定。





### 帕累托图

帕累托图是按照发生频率大小顺序绘制的直方图，表示有多少结果是由已确认类型或范畴的原因所造成。它是将出现的质量问题和质量改进项目按照重要程度依次排列而采用的一种图表。可以用来分析质量问题，确定产生质量问题的主要因素。二八分析线可以更直观的表达出是在哪些条件作用下对结果产生了80%的影响。

当用户需要对帕累托图的线进行大小或颜色等的调整时需要通过该线的右侧面板中常规或绘图进行设定。





### 组织图

组织图又名组织结构图、组织架构图等，是企业的流程运转、部门设置及职能规划等最基本的结构依据。



#### 组织图的绑定

直接在第三行【组织图】中绑定一个字段，或者在 x 或者 y 上绑定一个字段，再在图标类型中选择组织图来切换类型到组织图。在组织图中，通常绑定字段到组织图区域，绑定数值到标签，如下图所示：





#### 组织图的钻取

组织图的钻取不同于其它图表，主要是将分支收起和展开，钻取的符号在标记上，如下图：



也可通过轴上绑定的层次数据前的下钻 / 上钻符号来实现钻取。



### 矩形树图

矩形树图是一种有效的实现层次结构可视化的图表结构，全称是矩形式树状结构图。

直接在第三行【矩形树图】中绑定一个字段，或者在 x 或者 y 上绑定一个字段，再在图标类型中选择组织图来切换类型到矩形树图。在矩形树图中，通常绑定字段到矩形树图区域，绑定数值到大小和标签，如下图所示 :



### 词云

词云图类似于气泡图。对于关键词予于视觉上的突出，形成 “ 关键字云层 ” 或 “ 关键字渲染 ” 从而大量过滤掉相对不重要信息，帮助浏览者找到它的关键信息。

在标记组的颜色、大小、标签字段上绑定合适的值生成词云图。或者先绑定字段到 X 轴或 Y 轴上，然后单击字段前面的图标或通过右侧面板-常规-图表类型 - 更多，转化为词云图。







## 美化图表

图表的美化包含标记颜色、标记图案、标记形状、标记大小、以及标签的设置。其中标记图案和标记形状是互斥的，其中点图、线图、面积图、雷达图设定标记的形状，而其他图表类型则是设定图案。

美化界面提供标记组来对标记进行分组以及不同类型标记的美化，还提供共享机制更加方便用户的使用。



#### 打开图表美化界面

新建一个图表，打开其绑定界面，然后给图表绑定数据后，则在数据集资源树的下边打开美化界面，如下图所示。



#### 移除美化效果

用户可使用两种方法来移除已绑定数据段的美化效果。

用户可在已绑定数据段的下拉列表中选择移除选项，来移除当前数据段，如下图所示：



直接使用鼠标拖拽到查询树中来删除当前数据段。





#### 调整美化界面大小

纵向大小的调整：把鼠标移至下图红色框中的区域时，鼠标形状改变，通过上下移动来调整美化界面纵向的大小。





横向大小的调整：把鼠标移至下图红色框中的区域时，鼠标形状改变，通过左右移动来调整美化界面横向的大小。



### 标记颜色

用户可通过此属性来设定标记的颜色，本产品提供渐变模式。在渐变模式中可以设置为单色渐变或双色渐变，设置渐变类型。当用户不勾选效果时，标记的颜色高亮显示，当勾选效果时，颜色度量降低，颜色显示更立体。



用户还可拖拽当前查询中的数据段到颜色行中，则在图表上生成相应的图例，当用户拖拽维度目录下的数据段时，在图表上生成非连续的图例；当用户拖拽度量目录下的数据段时，在图表上生成连续的图例。



用户还可在已拖拽的数据段的下拉列表中对图例的颜色进行编辑。

当用户拖拽维度目录下的数据段时，用户可以在右侧下拉框中选择色系来调整每个字段对应的颜色，也可以勾选自定义后手动打开字段前的下拉列表选择想要的颜色。对话框中还存在反转选项，当勾选此项后图例中的数据显示顺序颠倒。



当用户拖拽度量目录下的数据段时，度量数据段的颜色编辑对话框中可设置图例的表现形式，可以以渐变、亮度、饱和度或彩虹的形式来展现。当勾选上对数刻度属性时，图例的范围是按照该数据段的值的对数显示。用户可自定义图例显示的最小值以及最大值。也可以选择渐变离散，通过设置步长改变图例色。还可以通过反转改变图例色。



| 类型   | 说明                                                         |

| ------ | ------------------------------------------------------------ |

| 渐变   | 从一个颜色到另一个颜色的渐变。RGB都会变化。需要选定一个起点颜色，和终点颜色。 |

| 亮度   | 亮度的线性变化。需要选择一个颜色作为基色。只改变其亮度。     |

| 饱和度 | 饱和度的线性变化。需要选择一个颜色作为基色。只改变其饱和度。 |

| 彩虹   | 按照彩虹的变化趋势                                           |



### 标记图案

当图表类型是柱状图、饼图、环状图类型时，在美化界面上可设置标记的图案。在标记图案中用户可单击图片选项，打开图样编辑器来设定图片作为标记的图案。在图样编辑器对话框中用户双击左侧图片列表中的图片，则在右下方显示示例图片，用户可设定图片的类型，拉伸、重复、按比例重复。





当用户选择拉伸时，标记只是显示一个图片；当用户选择重复时，标记按照固定比例重复显示图片；当用户选择按比例重复时，用户可设定单位长度，如 40000，则标记中每隔 40000 显示一个图片。当用户选择拉伸或重复时，不能设置单位，单位处于非激活状态。



用户还可拖拽当前查询中的数据段到图案行中，则在图表上生成相应的图例，当用户拖拽维度目录下的数据段时，在图表上生成非连续的图例；当用户拖拽度量目录下的数据段时，在图表上生成连续的图例。



用户还可在已拖拽的数据段的下拉列表中对图例的图案进行编辑。维度数据段的图案编辑对话框中存在反转选项，当勾选此项后图例中的数据显示顺序颠倒。



当用户拖拽度量目录下的数据段时，度量数据段的图案编辑对话框中可设置图例的表现形式，可以按横向、纵向、格子、左倾、右倾、或斜格子的形式来展现。当勾选上对数刻度属性时，图例的范围是按照该数据段的值的对数显示。用户可自定义图例显示的最小值以及最大值。



| 类型   | 说明                         |

| ------ | ---------------------------- |

| 横向   | 水平方向，由疏至密变化       |

| 纵向   | 垂直方向，由疏至密变化       |

| 格子   | 十字网格，由疏至密变化       |

| 左倾   | 向左倾斜的方向，由疏至密变化 |

| 右倾   | 向右倾斜的方向，由疏至密变化 |

| 斜格子 | 倾斜的网格，由疏至密变化     |



### 标记形状

当图表类型是点图、线图、面积图、雷达图类型时，在美化界面上可设置标记的形状，其中有两个标记动态点1和动态点2具有动态的效果，如下图所示：





用户还可拖拽当前查询中的数据段到形状行中，则在图表上生成相应的图例，当用户拖拽维度目录下的数据段时，在图表上生成非连续的图例；当用户拖拽度量目录下的数据段时，在图表上生成连续的图例。





用户还可在已拖拽的数据段的下拉列表中对图例的形状进行编辑。维度数据段的形状编辑对话框中存在反转选项，当勾选此项后图例中的数据显示顺序颠倒。



当用户拖拽度量目录下的数据段时，度量数据段的形状编辑对话框中可设置图例的表现形式，可以以填充图、填充饼图、多边形图、填充多边形图、梯形、或填充梯形的形式来展现。当勾选上对数刻度属性时，图例的范围是按照该数据段的值的对数显示。用户可自定义图例显示的最小值以及最大值。



| 类型         | 说明                                                         |

| ------------ | ------------------------------------------------------------ |

| 填充圆       | 变化方式：逐渐填满。                                         |

| 填充饼图     | 变化方式：逐渐填满。                                         |

| 多边形图     | 变化方式：逐渐边增多，达到趋向于圆。                         |

| 填充多边形图 | 变化方式：逐渐边增多，达到趋向于圆。                         |

| 梯形         | 变化方式：从倒三角形，变成倒梯形，变成方，变成正梯形，最后趋向于正三角形。 |

| 填充梯形     | 变化方式：从倒三角形，变成倒梯形，变成方，变成正梯形，最后趋向于正三角形。 |

| 填充矩形     | 变化方式：逐渐填满。                                         |





### 标记大小

通过此属性，用户可调节标记的大小。默认标记大小自动调整，自动选项被勾选，当用户调整标记大小后，不再勾选自动选项。





用户还可拖拽当前查询中的数据段到大小行中，则在图表上生成相应的图例，当用户拖拽维度目录下的数据段时，在图表上生成非连续的图例；当用户拖拽度量目录下的数据段时，在图表上生成连续的图例。



用户还可在已拖拽的数据段的下拉列表中对图例的大小进行编辑。用户可选择图例显示大小的范围，维度数据段的大小编辑对话框中存在反转选项，当勾选此项后图例中的数据显示顺序颠倒。



当用户拖拽度量目录下的数据段时，在度量数据段的大小编辑对话框中，当勾选上对数刻度属性时，图例的范围是按照该数据段的值的对数显示。用户可自定义图例显示的最小值以及最大值。







### 标记标签

用户可拖拽当前查询中的数据段到标签行，在图表标记上显示相应的标签值。





### 多标记美化

当图表中含有多个标记时，使用多美化指标可以给每个标记设置颜色，形状或图案，标记大小。当图表中只有一个标记时，多美化按钮处于非激活状态，当含有两个及更多个标记时，多美化按钮变成激活状态。



单击多美化按钮，则在美化界面上添加标记行，打开标记行中的下拉三角，则存在各个标记的数据段名称以及全部选项。用户可选择给其中一个标记设置特定的颜色、形状或图案、标记大小；也可选择全部，给所有标记设置统一的颜色、形状或图案、标记大小。



假设给 总和 _BUDGET_PROFIT 标记设置不同的标记属性，如下图所示：





在图表含有多个标记的情况下，用户也可给特定的标记的颜色、图案或形状、大小、标签绑定该查询中的数据段，当用户绑定的是度量目录下的数据段时，则美化效果只适用于当前标记，若用户绑定的是维度目录下的数据段时，则美化效果适用于所有标记。



### 图标美化共享机制

在图例中最多显示 30 个值。针对离散类型数据段需要做一个映射关系，已绑定的数据段的 30 个值和美化界面的值相对应。用户可能有自己对颜色的偏好。当用户给一个图表的颜色行绑定城市字段，设定好颜色后，也许用户希望给另外一个图表的颜色行绑定城市字段, 默认的颜色映射关系就可能不是上次的映射，就需要用户再进行颜色的修改，但有可能改得不太一致，会导致用户的误解。一个图表的红色表示北京，另一个图表的绿色才是北京。为了减少此弊端，提供了一个共享机制，所有使用该字段的地方，都共享一套映射。



例如：

1. 新建一个图表，对其 XY 轴绑定好数据段，并在其美化界面的颜色行绑定 MARKET 数据段，并编辑图例的颜色，如下图所示：



1. 再新建一个图表，对其 XY 绑定不同于上图表的数据段，但其美化界面也绑定 1）中的 MARKET 数据段，不对其进行颜色的编辑，则图例的颜色默认共享 1）中图例的颜色，如下图所示：



## 设置图表的标题

在图表的右侧面板-常规中可以设置标题选项以及隐藏标题，如下图所示：



### 标题

用户可设置标题的名称以及标题的位置，当选择左或右时，用户可设置标题所占的宽度；当选择顶部或底部时，用户可设置标题所占的高度；当选择漂浮时，用户可设置相对 X 轴的距离、相对 Y 轴的距离、标题所占的宽度、标题所占的高度。

如下图所示，设置图表的标题悬浮在图表上。





### 隐藏标题

当用户勾选了隐藏标题后，相应的轴的标题会被隐藏掉。当用户不勾选标题隐藏后，被隐藏的所有标题再次全部显示出来。



### 显示副标题

默认情况下，当 x 和 y 轴同时存在时，图表的右侧面板-常规中会显示副标题这项。去掉副标题隐藏的勾选状态后，打散 x 轴和 y 轴的标题，分别显示在相应的位置。

默认显示形式如下图：



显示副标题后，标题的显示如下图：



## 设置图表

打开图表的右侧面板-设置，可以设置图表的组件名称、可见性、过滤器等属性。



### 设置迁徙效果

在迁徙图的右侧面板中打开设置-迁徙动画，即可设置迁徙图的动画形式，如下图所示：





【迁徙动画】默认勾选隐藏。用户可根据需要设置动画效果及动画样式。当前动画样式支持飞机、汽车、卡车、火车及射线。







### 设置热力效果

产品对热力图，提供了两种热力效果展示形式：彩虹热力展示，自定义渐变热力展示。选中热力图，在其右侧面板-设置中打开热力效果的下拉菜单，用户可根据自己的需要设置想要的热力展示效果。





彩虹热力展示：





自定义渐变热力展示（设置颜色由绿色向蓝色渐变）：



## 设置图例（企业版功能）

打开图表的右侧面板-图例，可对图表的图例组、图例选项进行设置。

勾选图例选项中的隐藏可隐藏相应的图例，当用户去掉勾选时，被隐藏的图例会再次显示出来。

单击隐藏图例标题时，可隐藏当前图例的标题。去掉都选后，被隐藏的图例标题会再次显示出来。





## 设置轴（企业版功能）

选中图表，在右侧面板-轴中可以设置图表轴选项。其中轴选项包括：X轴/Y轴、字段、坐标轴隐藏、位置、轴线隐藏、网格线、标签、刻度、刻度设置。



轴页面的属性如下：

【字段】 选择设置属性的轴。

【坐标轴隐藏】 设置坐标轴是否隐藏。

【位置】设置轴所在的图表的位置。X轴包括自动、下方、居中、上方，默认为下方；Y轴包括自动、左方、居中、右方，默认为左方。

【轴线隐藏】设置轴线是否可见，勾选隐藏后轴线不显示。

【网格线】自动、显示网格、隐藏网格，默认为自动：绑定度量时，自动为显示网格；绑定维度时，自动时不显示网格。

【标签隐藏】设置标签是否可见，勾选隐藏后不显示轴标签。

【标签位置】设置轴标签的位置，分为内部、外部。

【标签显示间隔】 设置每多少个刻度显示一个标签。

【刻度隐藏】设置刻度是否可见，勾选隐藏则隐藏刻度。

【刻度位置】 设置刻度的显示位置。

【刻度设置】 设置轴刻度的属性，绑定维度时，该项有刻度类型、反转刻度、忽略空值；绑定 Measure 时，该项可设置刻度类型、反转刻度、共享轴、最大值、最小值、主要刻度、次要刻度、X轴数据起始值、是否以0为坐标轴中点、对数刻度、忽略空值；绑定 DATE 时，该项可设置刻度类型、向前、向后。





刻度设置的属性如下：

【刻度类型】分为时间刻度、离散刻度、连续刻度，可设置轴的类型。

【反转刻度】 是对轴的起始值和结束值的位置调换一下，并且 Mark 值也跟着变化。默认为自动，若绑定是维度字段，则自动与反转等效；若绑定为度量字段，则自动与不反转等效。

【忽略空值】计算的时候是否忽略空值。

【对数刻度】 对轴上的刻度取对数。

【X 轴数据起始值】 设置标记的起始值，下图为设置了 X 轴数据起始值为 50000，此时小于 50000 的值都是从 50000 往下的，大于 50000 的值都是往上的。





【共享组】 可以设置同一个 chart 下的不同的轴是否共享范围，需要手动输入共享组名称，在其它轴上选择已经定义的共享组名称，被选到一个组的轴就能默认共享范围，共享范围的意思是轴上的刻度范围是一样的。

【最小值】 设置轴的最小值。

【最大值】 设置轴的最大值。

【以 0 为坐标轴中点】勾选后可设置轴区间以 0 对称。

【主要刻度】 设置主要刻度。

【次要刻度】 设置次要刻度。



## 设置标记与标签（企业版功能）

标记项可通过右侧面板-绘图进行设置，不同的图表类型具有不同的标记形式。不同的标记支持不同的设置。本章节介绍常见图表的标记与标签设置。



### 设置标签重叠方式（企业版功能）

绘图的上方有标签重叠方式设置项，如下图所示：



用户可打开标签重叠方式的下拉菜单，设置重叠标签的属性。

【保留】当标记的标签重叠显示时，进行保留，不对重叠标签进行修改。

【打散】当标记的标签重叠显示时，把重叠的标签打散，使其不再重叠显示。

【删除】当标记的标签重叠显示时，把重叠的标签删除。

如下图所示，标记的标签值重叠显示:



在删除重叠标签后，如下图所示：



### 设置显示百分比

在饼图、3D 饼图、环状图上的图表区域右键菜单中有显示百分比选项，通过此选项可以快速实现总数百分比。



显示结果如下图所示：



### 设置标签的引导线（企业版功能）

饼图、环状图、3d 饼图支持显示引导线。 

标记展示出标签后，可以通过右侧面板-绘图，设置引导线是否展出。



饼图显示标签后可以展示引导线，如下图所示：





### 设置标记值的显示（企业版功能）

#### 设置是否显示标记值

用户可以设置是否显示标记的值。当用户去掉隐藏数值标签的勾选状态时，图表的标记值（即标签）将会在相应的标记上显示。当用户需要在标记的内部显示标签时则可打开位置的下拉菜单，选择标记内部，若想恢复在标签的外部显示时选择标记外部即可。用户在其标签上右键选择隐藏标签时，则相应的标签被隐藏了起来，若右键选择显示标签则被隐藏的标签会全部显示出来。



#### 设置标记值的显示位置

用户在图表的右侧面板-绘图中打开位置的下拉菜单，可选择标记内部 / 标记外部设置标记值位置。

【位置】用户可设定标记值的显示位置是在标记的内部还是外部。



如下图所示，标记值在标记的外部显示。



如下图所示，标记值在标记内部显示。



#### 设置隐藏标签

图表显示了标签后，用户可以选中标签在右键菜单中设置标签隐藏。



设置隐藏之后显示如下：



在图表区域的任意地方右键，右键菜单中会出现显示标签的菜单，如下如所示：





单击显示标签后，会将隐藏的所有的标签都显示出来。





### 设置标记大小（企业版功能）

没有在大小上绑定数据段时，用户可以在右侧面板-绘图-标记中设置标记的大小。支持标记大小设置的图表有：柱状图、3D柱状图、堆积柱状图、3D堆积柱状图、线图、堆积线图、点图、堆积点图、盒须图、面积图、堆积面积图、饼图、3D饼图、环状图、3D环状图、雷达图、填充雷达图、点渲染地图、迁徙地图。

单击大小中的下拉三角，可对标记的大小进行调整。



### 设置标记的提示信息（企业版功能）

通过图表的右侧面板-绘图-提示信息，用户可以自定义标记悬浮或选中后的提示信息。

- 支持直接输入文本，提示信息就是所输入的文本。
- 支持通过脚本来控制所绑定字段的展示格式，写法为：{ 字段名称 , 数据类型 , 数据格式 }。
- 字段名称：必须和绑定里面的名称一致，但是聚合要写成英文，例如 “ 总和 _SALES” 应该写为“Sum_SALES”。字段中不支持空格，如 Y 轴绑定的字段为 Distinct Count_SALES 则在提示格式中应写成 {col[“DistinctCount_SALES”],number,percent}。
- 数据类型：常用类型是 date， number。
- 数据格式：根据自己的需求输入需要的格式。日期和数字的格式请参考“[设置格式]()->[数据格式]()”的详细介绍。



例如

1. 日期，时间，时间戳字段的格式设置

日期：{col[“xxx”],date,yyyy-MM-dd}

时间：{col[“xxx”],date,HH:mm:ss}

时间戳：{col[“xxx”],date,yyyy-MM-dd HH:mm:ss}

1. 数值类型字段格式设置

货币：{col[“xxx”],number,currency}，

百分比：{col[“xxx”],number,percent}

千：{col[“xxx”],number,K}，也可以写 “ 千 ”， “ 万 ”， “ 亿 ”

百万：{col[“xxx”],number,M}

十亿：{col[“xxx”],number,B}

其它数据格式：{col[“xxx”],number,#,##0.00}

假设一图表如下图所示：





通过脚本来控制提示内容的格式，如下图所示：



则图表的提示如下图所示：



### 是否堆积负数（企业版功能）

通过图表的右侧面板-绘图-标记，用户可以设置是否堆积负数。支持标记堆积负数设置的图表有：堆积柱状图、3D堆积柱状图。

当勾选堆积负数时，图表上的标记进行堆积，负数与负数进行堆积，正数与正数进行堆积。

堆积前的图表如下图所示：



进行堆积负数，修改图表类型为堆积柱状图后，由于 USA“电脑”与“平板 ”产品利润值均为负数，故“ 电脑  与“ 平板 ”产品的利润进行堆积，-90 加上 -100 后的堆积高度达到 -190。而 China 中的“ 电脑 ”与“ 手机 ”产品的利润值均为正数，故“ 电脑 ”与“ 手机 ”产品的利润进行正向堆积， 120 加上 55 后的堆积高度达到 175，如下图所示：



### 是否显示汇总值（企业版功能）

用户可以对堆积柱状图和3D堆积柱状图设置显示汇总值。

当用户勾选显示汇总值时，图表的各个维度对应的总和值将会显示在相应的位置。需要注意的是，当勾选显示汇总值后，标记的标签值都会显示在标记内部。

 X轴绑定维度，Y轴绑定度量时，汇总值的显示如图所示：



X轴绑定度量，Y轴绑定维度时，堆积总和的显示如图所示：



### 是否隐藏气泡图的标记外标签（企业版功能）

用户可以通过右侧面板-绘图-标记设置是否超出气泡隐藏。

勾选超出气泡隐藏后，会将超出标记的标签隐藏处理，如下如所示：





去掉勾选状态后，会将所有的标签都显示出来：





### 设置线图、面积图的曲线（企业版功能）

用户可以设置折线图和面积图的曲线样式，包括是否显示折线上的点、是否显示光滑曲线。

#### 光滑曲线

当用户勾选此项时，线图将会以平滑的曲线进行展示，如下图所示：





#### 显示点

当用户不勾选此项时，线图中将不显示点，如下图所示：



### 是否显示点图标记形状与基准线（企业版功能）

#### 设置标记的形状

用户可以设置点图的标记形状。

例如，点图默认显示圆点，如下图所示。



用户可以选择其他的标记形状。



改变形状后效果如下图所示。



#### 设置是否显示基准线

用户可以设置是否显示图中的点在X轴、Y轴对应的位置。

当用户勾选此项后，鼠标悬浮在点图的标记上时将显示基准线，如下图所示：





### 设置饼图的分离距离、起始角度（企业版功能）

#### 分离饼图

设定分离尺度后，饼图将被分离，如下图所示：注意分离饼图不能超 50%。





#### 起始角度

当用户设定角度后，饼图将按照逆时针旋转相应度数，注意旋转度数不能超过 360.。



### 设置环状图的内半径、分离距离、起始角度（企业版功能）

#### 内半径

设定环状图的内半径。





#### 分离饼图

设定分离尺度后，环状图将被分离，如下图所示：

> **注意：**分离环图不能超 50%。





#### 起始角度

当用户设定角度后，环状图将按照逆时针旋转相应度数，注意旋转度数不能超过 360。





### 设置组织图的方向、叶子、数值位置（企业版功能）

在组织图的右侧面板中选择绘图，打开标记下拉菜单，即可打开组织图的标记属性设置框，如下图所示：





【方向】设置组织图的展开方向，横向是由左向右，纵向是由上到下。默认是横向。

【值位置】设置标签值显示的位置。当方向是纵向时，位置是前置和后置，内部。默认是内部。

【合并叶子】设置最后的叶子节点是否合并显示。默认是自动。



例如：

属性设置：“ 方向：纵向；值位置：内部；合并叶子：合并 ”，显示如下图：



### 设置不同渲染方式的地图标记（企业版功能）

不同的渲染方式对应的标记不同。



#### 点渲染

在地图的右侧面板上打开绘图-标记，即可打开点渲染的地图标记属性设置面板，如下图所示：



显示值、大小、提示信息的详细介绍见柱状图。



#### 区域渲染

在地图的右侧面板上打开绘图-标记，即可打开区域渲染的地图标记属性设置面板，如下图所示：



显示值、提示信息的详细介绍见柱状图。



#### 迁徙渲染

详见迁徙图的标记。



#### 热力渲染

热力渲染时，不支持标记。



## 创建度量组

用户有时候会遇到不只是 stack 同一个 mark 内部的值，而是想 stack 多个 measure 的值，这个取决于用户的数据是如何定义的，如果有一列数据是产品，一列数据是北京的销售额，一列数据是上海的销售额，一列数据是南京的销售额，那么这个 stack 就比较有意义了。

例如：在 chart 的绑定的 tree 上的菜单 More 中可以创建一个度量组，见下图：



然后就弹出新建度量组的对话框：



输入度量组的名称，勾选要创建度量组的 Measure ，单击确定后生成了名为度量组的度量字段，同时在维度下面也生成了一个度量组 _names 的维度字段，将度量组 _names 绑定到美化界面上，此时就实行了放在一个组里的所有的度量字段都能堆积显示出来，此时显示出来的效果是如图所示：





可以对绑定的度量组中的字段进行分别起别名，如下所示：



单击组内度量别名后，可以在弹出的对话框中修改别名，情况如下图：



单击确定后的情况如下图：



## 设置图表格式

### 组件格式

用户可设置图表的整体格式，也可单独设置图表不同区域的格式。图表的整体格式即组件格式。

选择组件，在右侧面板打开常规，打开组件格式的下拉菜单，如下图所示：



字体】设置组件中文本的字体。

【字号】设置组件中文本的字体大小。

【背景颜色】背景颜色包括单色、双色、图片，用户可根据需要进行设置。

【粗体】设置组件中文本的字体为粗体。

【斜体】设置组件中文本的字体为斜体。

【下划线】为组件中的文本设置下划线。

【删除线】为组件中的文本设置删除线。

【字体颜色】设置组建中文本的字体颜色

【边框】可为组件添加边框，以及设置边框的格式和颜色。

【透明度】设置背景色的显示程度。

设置背景颜色：

· 图片：用户可以导入图片，在图片列表中单击图片的名称，可在右侧区域预览该图片。图片的类型分为拉伸、重复、九宫格缩放。

当图片类型为拉伸时，不能设定单位，图片按照当前图表的宽高比例进行显示，如下图所示：



当图片的类型为重复时，图片按照原图比例在图表上显示，不能设定单位。当原图比图表的小时，则在图表上进行重复显示，如下图所示：



当图片的类型是九宫格缩放时，用户可设定缩放位置，则当前图片在图表上以此位置区域进行缩放，设置顶部 100px, 底部 200px, 左 100px, 右 200px 如下图所示：



- 单色：当选择图表的背景类型为单色时，用户可设定背景的颜色以及渐变类型，本产品提供多种颜色渐变类型，用户可根据需要进行选择。



- 双色：当选择图表的背景类型为双色时，用户可设定开始的颜色、结束的颜色，以及渐变类型，本产品提供多种颜色渐变类型，用户可根据需要进行选择。



### 图表的标题区域格式

用户首先选中图表的标题区域，然后在右侧面板打开常规，即可设置标题的格式信息，如下图所示：用户可根据需求进行设置。



如下图所示，对标题进行格式的设置。



### 轴的标签区域格式

用户首先选中轴的标签区域，然后在右侧面板打开常规，即可设置轴标签的格式信息，如下图所示：用户可根据需求进行设置。



如下图所示，对轴标签进行格式的设置。



### 轴线格式

用户首先选中轴（在轴线设置），然后在右侧面板打开常规，即可设置轴线的格式信息，可对轴的显示颜色进行修改，如下图所示：

用户可根据需求进行设置。



如下图所示，用户对轴的颜色进行设置。



### 图表区域格式

用户选中图表区域，然后在右侧面板打开常规，即可给图表区域添加边框，以及设置背景颜色和透明度，如下图所示：

用户可根据需求进行设置。



用户给图表区域添加背景色以及添加左右下三个边框，如下图所示：



其中地图图表区域的局部格式，是对应地图各个区域及区域间隔线的格式，用户给地图的图表区域添加背景色及边框线后，如下图所示：



### 标记区域格式

标记未绑定颜色时，用户选中标记，然后在右侧面板打开常规，即可设置标记的格式信息，如下图所示：

用户可根据需求进行设置。



背景类型有四种：单色，渐变，图片，图案。其中单色，渐变，图片，请参看“[图表美化]()-> [标记颜色]() ” 和 “ [图表美化]()->[标记图案]() ” 的介绍。



这里详细介绍图案，选择图案后，界面如下：



【背景颜色】设置标记的背景色。

【图案颜色】标记图案的颜色。

设置后的图表显示如下（图案颜色 FFFF1C，形状 第一行第二个）：



对于点图、堆积点图、地图，除了上面的样式外，用户还可以设置边框



【曲线颜色】设置点的边框的颜色。

【线的样式】设置点的边框的样式。

设置后的图表显示如下（曲线颜色 FF2219，线的样式 2px 直线）：



### 标签区域格式

在图表上显示出标签，然后在右侧面板打开常规，即可设置标签的格式信息：



设置格式，图表显示如下：



### 图例的标题区域格式

用户首先选中图例的标题区域，然后在右侧面板打开常规，即可设置图例标题的格式信息，如下图所示：用户可根据需求进行设置。



如下图所示，对图例标题进行格式的设置。



### 图例的标签区域格式

用户首先选中图例的标签区域，然后在右侧面板打开常规，即可设置图例标签的格式信息，如下图所示：用户可根据需求进行设置。



如下图所示，对图例的标签进行格式的设置。



## 设置叠放层次

叠放层次分为到顶部和到底部。当存在组件的重叠现象时，使用此功能可以调整组件的显示顺序。

例如

下面的报告中，文本框被表格组件遮挡，需要通过叠放层次的设置，把文本框放在报告的最顶层。



1. 选中需要设置层次的组件，例如文本组件。
2. 单击更多，选择“叠放层次”->"到顶部"。
3. 文本组件出现在表格上层，如图所示。



## 可视化分析

在仪表盘中各个组件根据各自特性，可以提供不同语义的数据展现。 腾讯云 认为数据展现不是结束，而只是开始，看到问题，更需要解决问题。要满足用户的日常管理和决策，操作型商业智能的实时性要求就成为必然。为满足普通的用户对商业智能系统提供服务的实时性需求，不同特点的组件都提供了各自相符的数据分析的功能操作。本章将介绍如何实现这些常见的操作。



### 聚合计算

图表，表，交叉表，文本，仪表等组件绑定的度量列支持切换不同的聚合方式去展示数据。以表格为例，首次绑定一个度量列时，列的聚合方式默认为总和，可再次绑定4次，聚合方式默认依次为平均、计数、最小值、最大值，之后不能再绑定此列。

产品中提供了23种聚合方式，下面分别介绍。

#### 总和

总和，即将所有数据的值加起来的总值。

例如，给表格组件绑定2列"MARKET"和"SALES",列"SALES"的聚合方式为总和，如下图所示，Central对应的所有SALES数据总和值为265045。



#### 平均

平均，即有数据值加起来除以总数据数得到的值。

例如，给表格组件绑定2列"MARKET"和"SALES",列"SALES"的聚合方式为平均，如下图所示，Central对应的所有SALES数据的平均值为192.206。



#### 最大值

最大值，即所有数据值中最大的值。

例如，给表格组件绑定2列"MARKET"和"SALES",列"SALES"的聚合方式为最大值，如下图所示，Central对应的所有SALES数据中的最大的值为716。



#### 最小值

最小值，与最大值相反，即显示所有数据值中最小的那个值。

例如，给表格组件绑定2列"MARKET"和"SALES",列"SALES"的聚合方式为最小值，如下图所示，Central对应的所有SALES数据中的最小的值为23。



#### 计数

计数，即所有数据行的总数量，包括数据值相同的数据。

例如，给表格组件绑定2列“列名”和“值”,列“列名”的聚合方式为计数，如下图所示，“a”对应的所有值的数据总行数计数为6。



#### 精确不同值计数

精确不同值计数，即所有数据行中数据值不同的数据的总行数，相同数据的只计算一次。

例如，给表格组件绑定2列“列名”和“值”,列“列名”的聚合方式为精确不同值计数，如下图所示，“a”对应的所有值中不同值的数据总行数计数为3，即列名为“a”值为“3”的数据共有三行，按照一行计算。



#### 不同值计数

不同值计数，数据量较小时与精确不同值计数类似，即计算所有数据中不同数据值的行数。只有在大数据量的时候不同值计数才有可能与精确不同值结果有差别，即当数据量较大时，精确不同值数据仍旧是计算所有数据中不同值的数据数量，而不同值计数只会从部分数据中计算不同值的数据数量。

例如，给表格组件绑定2列"MARKET"和"SALES",列"SALES"的聚合方式为不同值计数，如下图所示，Central对应的SALES数据的不同值计数结果为330，而精确不同值计数的值为322。



#### 相关系数

用户可以在绑定界面中列的下拉菜单中选择度量-更多，打开聚合对话框，聚合方式选择相关系数，如下图所示，当选择相关系数后，”和“会变成可选状态，即要选择的相关的列，此选项为必选，加载组件当前绑定查询的所有数值类型的度量列，后面有与此类似的将不赘述。



例如，给表格组件绑定2列"MARKET"和"SALES",列"SALES"的聚合方式设置为相关系数，第二列“和”选择列“AREA_CODE”，结果如下图所示。



#### 协方差

用户可以在绑定界面中列的下拉菜单中选择度量-更多，打开聚合对话框，聚合方式选择协方差，当选择协方差后，“和”会变成可选状态，即要选择的权重列，为必选项。

例如，给表格组件绑定2列"MARKET"和"SALES",列"SALES"的聚合方式设置为协方差，第二列“和”选择列“AREA_CODE”，结果如下图所示。



#### 中位数

中位数，即所有数据中间的数据值。

例如，给表格组件绑定2列"列名"和"值"，列"值"的聚合方式设置为中位数，结果如下图所示，当前数据总共6行，则中位数为第3行与第4行数据的平均值。



#### 模式

用户可修改聚合对话框中的聚合方式为模式，当选择模式时，“和”选项不可选。



#### 总体标准差

用户可修改聚合对话框中的聚合方式为总体标准差，当选择总体标准差时，“和”选项不可选。

#### 乘积

用户可修改聚合对话框中的聚合方式为总体方差，当选择总体方差时，“和”选项不可选。

#### Pth百分位

用户可修改聚合对话框中的聚合方式为Pth百分位，当选择Pth百分位时，聚合选项下方显示P输入框，此输入框仅支持输入数字，有效值为【0,100】。



#### 四分位数

用户可修改聚合对话框中的聚合方式为四分位数，当选择四分位时，聚合选项下方显示四分位数输入框，此输入框仅支持输入数字，有效值为【0,4】。

#### 范围

用户可修改聚合对话框中的聚合方式为范围，当选择范围时，“和”选项不可选。

#### 标准差

用户可修改聚合对话框中的聚合方式为标准差，当选择标准差时，“和”选项不可选。

#### 标准误差

用户可修改聚合对话框中的聚合方式为标准误差，当选择标准误差时，“和”选项不可选。

#### 平方和

用户可修改聚合对话框中的聚合方式为平方和，当选择平方和时，“和”选项不可选。

#### 权重和

用户可修改聚合对话框中的聚合方式为权重和，当选择权重和时，“和”选项变成可选，并且是必选的。

#### 方差

用户可修改聚合对话框中的聚合方式为方差，当选择方差时，“和”选项不可选。

#### 加权平均

用户可修改聚合对话框中的聚合方式为加权平均，当选择加权平均时，“和”选项变为可选，并且是必选的。



### 动态计算（企业版功能）

动态计算器是表、交叉表和图表组件特有的，用来计算格子之间的数值变化。例如求同比，环比，年度百分比，总计百分比等等。此类计算器只能保持在单个组件里，不能被其他组件重复使用。

动态计算器指每个格子的数值是动态计算出来的，也可以称为是格间计算。主要解决在表格中沿着特定的方向来动态计算出数值。其中有两个要素，即计算方向，和计算方法（或函数）。

计算方向就跟表的结构有关系。如果想做产品关于季度增量的环比计算，就需要把产品字段和季度字段作为分组，沿着季度字段来计算。我们把分组叫做分区 (Partition)。沿着什么方向叫做基于的方向（Addressing）。

计算函数包括差值，百分比，差值百分比，汇总百分比，累积计算，移动计算，和排名计算。每一种计算函数都有一些特殊的属性和参数。

界面上提供了一些内置的计算函数和计算方向，用户也可以根据需要自定义计算函数和计算方向。对于自定义的计算函数，还可以使用二次计算的属性，即当前动态计算可使用其他动态计算的结果再做第二次计算。



#### 添加动态计算器

1.在绑定的度量数据段的下拉列表中选择 “ 预定义的动态计算器 ”，在展开的子列表中选择想要添加的计算器：差值，百分比，差值百分比，汇总百分比，累积总计，移动计算，和排名计算。添加完以后，还可以在数据段的下拉列表中进行编辑。

2.在绑定的度量数据段的下拉列表中单击 “ 添加动态计算器 ”，弹出添加动态计算器的对话框，在该对话框中有三个选项 “ 计算 ”、 “ 计算依据 ” 以及 “ 差值 ”。其中 “ 计算依据 ” 选项在不同的组件中含有的内容不同。



#### 分组与方向

分组即把组件中的数据进行分组，方向决定动态计算的顺序。例如一表中的数据如下图所示 :



把表按列进行分组，计算方向为纵向，计算函数为累积总计，结果如下表所示。按照蓝色框中的字段进行分组，红色框中的数据为计算方向。



用户定义的计算方向包括表格横向、表格纵向、表格横向然后纵向、表格纵向然后横向、沿平面横向、沿平面纵向、沿平面先横向再纵向、沿平面先纵向再横向、格子、高级。

假设一交叉表中行表头绑定了年和季度字段，列表头绑定了产品类别“PRODUCT_TYPE”和产品“PRODUCT”字段，汇总行绑定销售额“SALES”字段，如下图所示，此表将在下文中多次使用。



##### 表格横向

在每个分组内沿水平方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择表格横向时，季度和年为 Partition，产品和产品类别为 Addressing。



分组情况如下图所示 :



##### 表格纵向

在每个分组内沿垂直方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择表格纵向时，产品和产品类别为 Partition，季度和年为 Addressing。



分组情况如下图所示 :



##### 表格横向然后纵向

在每个分组内先沿水平方向然后沿垂直方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择表格横向然后纵向时，所有字段既为 Partition 又为 Addressing。



所有字段作为分组，计算方式为表格横向进行计算然后到下一行，再沿表格横向继续进行计算。





##### 表格纵向然后横向

在每个分组内先沿水平方向然后沿垂直方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择表格横向然后纵向时，所有字段既为 Partition 又为 Addressing。



所有字段作为分组，计算方式为表格纵向进行计算然后到下一列，再沿表格纵向继续进行计算。



##### 沿平面横向

在每个平面内沿水平方向进行计算。注意平面是由绑定的倒数第二个维度字段确定的。

如下图所示季度产品的销售情况，当 Addressing 选择沿平面横向时，季度、年和产品类别为 Partition，产品作为 Addressing。



分组情况如下图所示 :



##### 沿平面纵向

在每个分组内沿垂直方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择沿平面纵向时，年、产品类别和产品为 Partition，季度作为 Addressing。



分组情况如下图所示 :



##### 沿平面先横向再纵向

在每个分组内先沿水平方向然后沿垂直方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择沿平面先横向再纵向时，年和产品类别作为 Partition，季度和产品作为 Addressing。



分组情况如下图所示，计算方式为平面横向进行计算然后到下一行，再沿平面横向继续进行计算。



##### 沿平面先纵向再横向

在每个分组内先沿水平方向然后沿垂直方向进行计算。如下图所示季度产品的销售情况，当 Addressing 选择沿平面先横向再纵向时，年和产品类别作为 Partition，季度和产品作为 Addressing。



分组情况如下图所示，计算方式为平面纵向进行计算然后到下一列，再沿平面纵向继续进行计算。





##### 格子

基于每个格子进行计算，此时所有字段都是 Partition，当计算占总数的百分比时尤其有使用价值。

##### 高级

用户单击高级选项，则会弹出自定义桩对话框，如下图所示 :



【可用的列】可用的列中列出了当前组件中绑定的所有维度字段，包括图表的美化界面中绑定的维度字段。

【计算依据】用户可通过鼠标拖拽来设定计算依据那一个数据段进行分组计算。

例如：存在一个图表，如下图所示 。



用户需要分别计算 Small Market 和 Major Market 中每个 Market 的盈利占比情况。

用户需要在总和 _PROFIT 的下拉列表中选择添加动态计算器选项计算选择为汇总百分比，计算依据选择高级，汇总函数选择总和。



计算依据选择高级后，弹出自定义桩对话框，用户需要把 MARKET字段拖拽到计算依据列表中，即按照 MARKET 进行分组计算。



单击确定按钮后，选中图表，右边面板-绘图中去掉勾选数值标签的隐藏，使显示标记值，结果如下图所示 :



**动态计算详细请参考 []() 中描述。没有必要写了**

### 同比/环比计算

**详请参见 [表]() 中的描述。**



### 数据分组（企业版功能）

在表、交叉表、图表组件中可以进行分组操作，也就是说可以将两个字段合并成一组，那么取消分组就是将合并在一起的字段再拆分的过程。



例如1：表、交叉表组件的分组。

1. 用鼠标选择想要分组的字段，然后右键选择【分组】，弹出了分组的对话框，如下图所示：
2. 单击【确定】，上面所选的两个字段分到了一组里面，见下图：



例如2：图表组件的分组。

1. 用鼠标选择想要分组的字段，如下图所示。



1. 右键选择【分组】，弹出了分组的对话框，设置分组名称，如下图所示：
2. 单击【确定】，上面所选的三个字段分到了一组里面，见下图：



### 设置目标线

用户可通过右侧面板-设置界面在图表中设定目标线。

假设存在如下图表。



选中图表，单击右侧面板的设置，单击目标线的添加按钮，打开目标线对话框。



【名称】设定目标线的名称。

【起始值】设定目标线的开始值，有填充颜色时才能看出效果。

【目标值】设置目标线的目标值：可通过下拉菜单选择计算依据的度量（在已绑定的度量列中选择）、进行计算的算法。其中目标值中可通过下拉菜单选择输入常量或者常用函数列表。



- 常量：默认的初始值为常量，用户可在右侧出现的文本输入框中输入需要的值。
- 常用函数：用户可选择函数：最大值、最小值、平均数、中位数，将以度量列计算后的结果为目标值。
- 特殊函数：四分位数，选中四分位数后右侧出现一个下拉菜单，可以选择需要输出的值：最小值、较小四分位数、中位数、较大四分位数，最大值。默认为：较小四份位数，如下图：



【标签格式】用户可设定目标线的标签名和数值是否显示。

- 显示标签名：用户可设定目标线的标签名是否显示。
- 显示数值：用户可设定目标线的值是否显示。

设定目标线后的效果如下图所示：



### 设置趋势线

用户可通过右侧面板-设置界面在图表中设定趋势线。

假设存在如下一图表。



选中图表，单击右侧面板的设置，单击趋势线的添加按钮，打开趋势线对话框。



【名称】设定趋势线的名称。

【线】用户可设定趋势线的样式和颜色。

【度量】用户可选择为哪个标记字段设定趋势线。

【类型】包括指数、线性、对数、幂、多项式，用户可根据需要进行选择。当用户选择多项式时，多项式次方选项才处于激活状态。

- 指数：应用曲线显示以越来越高的速率上升或下降的数据值。对于指数趋势线，数据不应该包含零值或负数。
- 线性：应用最适合的拟和直线显示包含以稳定的速率增加或减少的数据值的简单线性数据集。
- 对数：应用最适合的拟和曲线显示稳定前快速增加或减少的数据值。对于对数趋势线，数据可以包含负数和正数。
- 幂：应用曲线显示比较以特定速率增加的测量值的数据值。对于幂趋势线，数据不应该包含零值或负数。
- 多项式：应用曲线显示变动数据值。单击此选项，然后在 “ 次数 ” 框中输入一个 2 到 6 之间的整数，以确定曲线中出现的弯曲数（峰值数和峰谷数）。例如，如果将 “ 多项式次方 ” 的值设为 2，则图表通常只显示一个峰值或峰谷，值 3 显示一个或两个峰值或峰谷，值 4 最多可以显示三个峰值或峰谷。

趋势线可以点选，鼠标移动到趋势线上时，显示该趋势线的公式。如下图所示，对应上图的指数趋势线。





### 图表钻取（企业版功能）

在图表上的钻取与在表格组件和交叉表组件上的钻取效果不同，在表格以及交叉表组件上的钻取是以增加维度或者减少维度信息的形式展现，而在图表上则是以替代的形式展现。



例如

1. 如下图所示，创建一个图表，绑定层次字段年。
2. 对 2009 年的数据进行下钻，单击下钻符号，如下图所示：
3. 钻取结果为 2009 年各个季度的数据统计，同时在绑定窗口中出现了季度字段，如下图所示：
4. 由于季度字段处于年字段与月字段之间，则在图表上同时显示了上钻按钮以及下钻按钮。当用户继续单击下钻按钮时，则显示 2009 年第一季度的三个月份的数据统计；若单击上钻按钮，则再次显示 2009 年与 2010 年的数据统计。



### 缩放（企业版功能）

此功能只适用于图表组件，其他组件没有此项功能。当鼠标在图表的区域时，缩放按钮 悬浮在图表的右上方。缩放后，图表标记的比例仍然保持。



#### 使用方法

1.选中图表的标记。

2.可用鼠标单击某个标记，使该标记处于选中状态，图表支持 Ctrl 键进行多选。当图表在笔刷模式下时，图表可支持鼠标划选。

3.单击图表右上方的缩放按钮，则选中的标记进入放大状态，倘若进入放大状态的标记有多个，图表可支持 Ctrl 键多选以及鼠标划选来选中标记，单击缩放按钮再次进入放大状态。

1. 单击缩放按钮，退出缩放模式。



#### 缩放的联动

当对图表使用缩放功能后，会联动与其绑定数据源相同的其他组件（表，交叉表，自由式表格、图表，仪表，文本）。





#### 缩放的比例保持

缩放后，图表的标记大小比例会保持住。当标记的大小上绑定数据时，可以看到效果，如下图所示：



### 笔刷

笔刷功能适用于表、交叉表以及图表中，在其他组件中不支持此功能。当鼠标悬浮在组件区域时笔刷按钮显示在组件的右上方。



#### 笔刷功能

进入笔刷模式后，会把高亮区域的维度信息送出，来对其他组件的数据进行筛选。其中被影响的组件可以是表、交叉表、图表、文本、仪表。

对含有分组合计的表，在进入笔刷模式后，单击分组合计行则把该表的所有维度信息送出，而合计行不能使用笔刷功能。（分组合计与合计的详细介绍在表中）



#### 进入笔刷模式

1.用户可直接单击笔刷按钮进入笔刷模式

2.直接在表、交叉表的内部双击（标题区域不支持），在图表的标记、图例、以及坐标上双击进入笔刷模式。

> **注意：**当组件没有维度信息时不能进入笔刷模式。



#### 使用笔刷功能

如下图所示，单击表组件的笔刷按钮，进入笔刷模式，单击 “Florida”，该行处于高亮状态，送出其维度信息即 TYPE 为 Regular 和 STATE 为 Florida，图表受到表的影响，相应的标记也进入高亮状态，图表的笔刷按钮并未进入选中状态，来表明图表是被影响的对象。

而针对其他组件，包括表、交叉表、文本、仪表并不以高亮的状态来显示，只是被筛选。



### 排序

排序可以分为无序、升序、降序、手动排序和高级排序。



#### 手动排序（企业版功能）

通过手动排序，用户可以手动的拖拽字段进行排序，更加的方便灵活。



#### 高级排序（企业版功能）

高级排序适用于聚合状态的表、交叉表以及处于聚合状态的图表。只有维度数据段才具有高级排序属性，度量类型的数据段不具有此属性。高级排序可实现对聚合的度量字段的排序。



##### 进入高级排序

打开组件的绑定界面，若是表或图表则使其处于聚合状态，打开维度数据段的下拉列表，单击更多排序下面的高级排序选项打开高级排序窗口。



##### 高级排序原理说明

高级排序对话框如下图所示，默认状态根据字段设置的普通排序保持一致，例如原来设置的是升序，那么高级排序默认就是升序。当选择顺序升序或降序后，值和聚合列变成激活状态。



【值】当用户选择无序时，默认按照查询中的顺序进行排序，当选择按照值进行升序或降序时，对查询中的数据做普通排序。

【聚合列】当用户选择按照聚合列进行升序或降序排列时，用户需要设定好聚合列的选项，按照聚合列的条件进行筛选数据，筛选出来的数据按照聚合列的值进行升序或降序排序。

【Top N】假设聚合列求和之后的数据为 1000、 1000、 900、 200、 200、 100，降序处理，选择 Top N 为 4 时，筛选出来的数据为 1000、 1000、 900、 200、 200。即 Top N 是按照相同值计数来计算的，第四个是 200，则所有的 200 会被筛选出来。

Top N 为空时，即按照聚合列进行排序，不再对数据进行筛选。

【Top N 以外的数据显示为 " 其它 "】 除去 Top N, 所有剩余数据会显示为 “ 其它 ”。



##### 使用高级排序

1. 新建一个表，假设绑定如下所示的数据段，表处于聚合状态。



1. 在数据段 PRODUCT 的下拉列表中选择高级排序，在打开的高级排序对话框中选择升序，聚合列选择“SALES”，聚合函数选择”总和“， Top N 设置为 2，勾选’TopN以外的数据显示为“其它”‘。
2. 按照升序处理，排第 2 位的是 2994，则所有剩余的列求和显示为 " 其他 "，计算结果如下图所示。



##### 图表排序改进

增加了排序的快捷方式。

在X轴、Y轴绑定字段后，打开维度轴的下拉列表，列表中增加了快捷排序方式：



通过选择不同的快捷排序方式，可达到快速排序的目的，下面以上图为例进行介绍。

【升序（PRODUCT）】PRODUCT列按照值“PRODUCT”进行升序排序，排序结果如下：



【降序（PRODUCT）】PRODUCT列按照值“PRODUCT”进行降序排序，排序结果如下：



【升序（总和_BUDGET_COGS）】PRODUCT列按照聚合列“总和_BUDGET_COGS”进行升序排序，排序结果如下：



进入高级排序对话框，此时顺序为升序，聚合列为BUDGET_COGS，聚合方式为总和。设置TOP N为5，排序结果如下：



【降序（总和_BUDGET_COGS）】PRODUCT列按照聚合列“总和_BUDGET_COGS”进行降序序排序，排序结果如下：





进入“PRODUCT”的高级排序对话框，此时顺序为降序，聚合列为BUDGET_COGS，聚合方式为总和。设置TOP N为5，排序结果如下：





### 换XY轴

交叉表和图表组件支持通过切换行列表头/XY轴，改变数据的展示形式。



v切换行列表头：用于交换交叉表中的行表头和列表头的位置。

例如：切换下面交叉表的行列表头。



单击“切换行列表头”按钮，交换行表头和列表头的位置，效果如下图所示。



**切换 XY**：用于交换图表中的 X 轴和 Y 轴的位置。

例如：切换下面图表的X、Y轴。



单击“切换XY”按钮，交换X轴和Y轴的位置，效果如下图所示。



### 查看具体数据（企业版功能）

【显示详细数据】单击组件右上角的“ 详细数据 ” 按钮，会弹出组件绑定数据集的详细数据信息对话框，如下图所示。








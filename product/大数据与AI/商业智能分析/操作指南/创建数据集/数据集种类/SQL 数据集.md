
### 创建 SQL 数据集
通过以下两种方式进入创建 SQL 数据集界面：

* 第一种，单击导航栏-> 创建数据集，在新打开的页面上选择 “SQL 数据集”。
* 第二种，如果您有已打开的数据集界面，单击菜单栏-> 创建数据集->SQL 数据集。

用户在数据集界面上，点击菜单栏上的新建数据集按钮，选择 SQL 数据集，即可打开 SQL 数据集界面。

![](//mc.qcloudimg.com/static/img/4102f560bfd328cdbcd24b7a64e40822/image.png)

也可以点击首页上的 SQL 数据集，进入 SQL 数据集新建界面。

![](//mc.qcloudimg.com/static/img/e6fef0611823b8450b9af84765501f06/image.png)

### SQL 数据集界面

在打开的界面中，用户可设定数据库类型、驱动、URL 等，并可编辑使用 SQL 语句，还能够对 SQL 数据集的性能进行检测。

![](//mc.qcloudimg.com/static/img/510d7f0361eb302796a19f68e44b8cd1/image.png)

【数据源】当用户选择自定义数据源时，可配置相应的数据源。用户也可以从已有的数据源列表中选择已经创建好的数据源。

【数据库】用户可设定该数据集中使用的数据库的类型。

【URL】所选数据库的 URL 地址。

【驱动】用户可选择需要的驱动类型

【需要登录】当数据库设定了访问权限后，用户需要勾选此项，使用用户名和密码来访问当前数据库。

【表】当用户点击刷新按钮后，在列表中列出了当前数据库中存在的所有表。右键刷新后可以对数据源中表、视图、存储过程进行搜索。详细用法见简介中数据源搜索部分。
倘若是使用腾讯云数据BI 提供的驱动和数据库，则在此列表中列出了所有的数据集。

【SQL 语句】用户输入脚本语句，实现对数据库中数据的数据集。

在使用 ACCESS 数据库时，刷出的表名称的后边有 $ 字符，用户在写 SQL 语句时需要使用双引号把该表引起来，如 select Sales from "Coffee_chain$"。在使用腾讯云数据 BI  产品提供的驱动及数据库时，在编写 SQL 语句时需要遵循本产品的 SQL 语句法则。

* 引用的数据集存在子级时需要添加双引号，如 select Sales from "cloud/test.clqry"，不存在子级时则不需要添加双引号，如 select Sales from test.clqry

* 引用关键字时需要加引号。如数据集 a.clqry 中存在 Date 字段，由于 Date 字段是数据库中的关键字，则需要被双引号引起来， select "Date" from test.clqry

* 注意赋值类型为字符串类型时，需要用单引号引起来而不是双引号。如 select Nation from test.clqry where Nation='China'

注意事项：在 SYBASE 数据库中不支持 order by 语句。

【性能检测】用户使用 SQL 数据集时，系统会对数据集性能进行实时检测，并对影响性能的地方做出橙色标识，告知用户哪些列操作操作没有下推到数据库执行，如下图所示:

![](//mc.qcloudimg.com/static/img/8e24112389d639bb70b9bae94a41ba24/image.png)

行过滤器处的过滤条件如果没有下推到数据库执行，行过滤器处也会做出橙色标识, 如下图所示：

![](//mc.qcloudimg.com/static/img/bf03b56c86137444d110048f28e0c12b/image.png)

用户也可以通过点击检测性能，查看所有性能问题。

![](//mc.qcloudimg.com/static/img/7f02fcd9a0f5d5ddb77433841a3fcbba/image.png)

用户点击【刷新元数据】按钮时，所有数据段将在元数据区域显示。 在表达式、过滤器等位置引用的列如果发生变化，刷新元数据时会提示 “ 数据集的列如果发生变化可能会导致表达式列、层次或行过滤器不可用，是否清空表达式列、层次和行过滤器？ ”，否则不会提示。本产品默认字符类型、字符串类型、字节类型、布尔类型的数据段存放在维度目录下，其他类型数据段存放在度量目录下。


商业智能分析 BI 支持连接 MongoDB 数据源，进行数据查询、计算和分析。通过输入 URL、用户名和密码成功连接 MongoDB 后，选择数据库中的某个集合，即可以数据集这个集合中的数据。产品支持管道操作（Pipeline）语句对集合进行过滤、分组、聚合和排序等等操作。

### 创建Mongo 数据集
点击创建数据集按钮后，进入到创建数据集的界面。

用户在数据集模块中，点击工具条上的新建数据集按钮，选择 Mongo 数据集，即可打开 Mongo 数据集界面。

![](//mc.qcloudimg.com/static/img/4102f560bfd328cdbcd24b7a64e40822/image.png)

### Mongo 数据集界面

在打开的界面中，用户可从已有的数据源中选择 Mongo 数据源，也可以自己设定 URL、集合等，并且可编辑使用管道操作语句。

![](//mc.qcloudimg.com/static/img/1f8849b5472958bce7c9888cbd34f95d/image.png)

【数据源】 当用户选择自定义数据源时，可配置相应的数据源。用户也可以从已有的数据源列表中选择已经创建好的 Mongo 数据源。

【URL】 Mongo 数据库的 URL 地址。

【选择转换时区】输入数据存入 Mongo 时的时区。如果数据存入 Mongo 时，没有指定时区，即可以不用做选择。如果存入数据时，指定了时区，在这需要选择相应的时区对数据进行转换。

【需要登录】当数据库设定了访问权限后，用户需要勾选此项，使用用户名和密码来访问当前数据库。

【默认数据库】指定默认数据库。

【集合】可以在此输入集合（Collection）名称，也可以从下方选择集合中选择一个集合。

【选择集合】点击右键刷新，此列表中列出了默认数据库下的所有集合。右键刷新后可以对数据库下的集合进行搜索。详细用法可参考简介中数据源搜索部分。

【管道操作语句】用户输入管道操作（Pileline）语句，实现对数据库中数据的数据集。
在选择或输入集合名称之后，点击刷新元数据，既可以按列以 Table 的形式显示集合中的所有数据。

也可以输入管道操作语句，产品可以解析“{}” 括起来的所有正确的管道操作语句，多个管道操作语句之间用逗号分隔。

如:

{ $project : { market:{$toUpper:"$market"} , sales:1, _id:0 } },

{ $sort : { market : 1, sales: 1} }

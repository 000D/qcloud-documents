####信封加密简介
信封加密也被称为数字信封技术，类似现实信封通过法律约束只有收件人才能查看内容，数字信封通过现代密码技术保证只有指定权限拥有者才可以解密对应数据

信封加密基于性能要求而产生的方案，它具有和KMS 文件加密同样的安全性，但是在性能上要优于前者，所需要额外付出的是开发者需要实现服务器本地的业务数据加解密

何时使用信封加密？

1. 单次加解密数据体积较大时，目前KMS API支持4KB以下文件加解密
2. 想对业务数据加解密，但是又比较在乎处理时间。KMS 服务后台虽然拥有非常高的性能，但是远程调用往返的时间必然还是大于本地处理的时间

KMS 文件加密和 KMS 信封加密区别

|| 加密使用的密钥 | 性能 | 主要场景
|-|:-:|:-:|:-:|
|KMS 文件加密|KMS主密钥| 常规（远程调用） | 密钥、证书、小型数据 |
|KMS 信封加密|KMS主密钥 + 数据密钥| 高（单次远程调用，海量本地处理） | 海量数据 |


####信封加密加密部分（图+说明）

![图片](./img/kms_wiki_xfjm_1.png)

* 1 获取密文DEK：2种方法，临时通过KMS API生成一个DEK，事先加密一个DEK，开发者可以根据场景自行选择。方法1是被称为『一次一钥』的高安全性方案，但是消耗较多性能，一般场景可以考虑采用方法2复用DEK提高性能。
* 2 解密密文DEK：调用KMS API使用生成或加密DEK的CMK来解密对应密文DEK
* 3 加密明文业务数据：使用明文DEK在本地加密业务数据（由开发者自己实现，使用对称加密）
* 4 保存CipherBlob到数据仓库：密文DEK和密文业务数据合并后称为CipherBlob，打包的目的是为了


####4) 信封加密解密部分（图+说明）

![图片](./img/kms_wiki_xfjm_2.png)
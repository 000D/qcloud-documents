 
## 背景  
- 客户需求：云服务作为用户的核心 IT 资产，用户需要对云上的资源操作进行记录，以便发生问题时，进行溯源，保证企业人员资产操作安全性；  
- 现有操作日志情况：通过操作日志提供的 API，云产品将操作信息推送给操作日志应用，这样的操作日志记录字段有限，日志内容不完整，且需要云产品一个个接入，不同的操作也要一个个接入，会造成人力资源的浪费。  

## 工作原理  
在您创建腾讯云账户时，将对账户启用 CloudAudit。当您的腾讯云账户中发生活动时，该活动将记录在 CloudAudit 事件中。您可以通过转到 Event history 轻松查看 CloudAudit 控制台中的事件。

利用事件历史记录，您可以查看、搜索腾讯云账户中过去七天的受支持活动。此外，您还可以创建一个 CloudAudit 跟踪，以进一步存档、分析和响应您的腾讯云资源的变化。跟踪是一种配置，可用于将事件传送到您指定的 COS 存储桶。您可使用 CloudAudit 控制台或 CloudAudit API 创建跟踪。
可创建两种类型的跟踪：

- 应用于所有区域的跟踪
在创建应用于所有区域的跟踪时，CloudAudit 会在每个区域中创建相同的跟踪。然后，它会在每个区域中记录事件，并将这些 CloudAudit 事件日志文件传送至您指定的 COS 存储桶。在 CloudAudit 控制台中创建跟踪时，这是默认选项。

- 应用于一个区域的跟踪
当您创建适用于一个区域的跟踪时，CloudAudit 仅记录该区域中的日志文件。然后它将 CloudAudit 事件日志文件传送到您指定的 COS 存储桶。如果您另外创建了单个跟踪，可以让这些跟踪将 CloudAudit 事件日志文件传送到同一个 COS 存储桶或单独的存储桶。

**注意**
对于这两种类型的跟踪，您可以指定来自任何区域的 COS 存储桶。

云审计服务直接对接上腾讯云服务上的其他服务，记录用户的云服务资源的操作信息，实现展示最近的云API操作记录，用于日后替代现有的操作日志功能。
用户可以对事件文件执行以下两种操作：  

- 事件文件的创建和保存： 当用户在弹性云服务器、云硬盘服务、镜像服务等其它与云审计完成对接的服务中，进行了增加、删除、修改类型的操作时，执行操作的服务会自动记录操作动作及操作结果，并按照指定的格式发送事件文件到云审计服务完成事件归档。
云审计服务管理控制台会保存最近7天的操作记录。 

- 事件文件查询：
用户可以通过云审计服务页面的事件列表界面自带的条件和时间过滤功能，查询最近7天的操作记录。  
开通云审计服务时关联到的跟踪集是一个日志应用，应用中包含了记录操作日志种类信息，操作日志存储路径等内容。使用跟踪集，用户可以自己创建的一个目录来记录自己的操作记录，这个记录的不只是七天的操作内容，会记录下该用户过往的所有操作。而操作记录中展示的只是最近七天的操作记录。


## CloudAudit 工作流程  
-  访问云审计服务  
您如果已注册腾讯云账户，可以通过腾讯云控制台或使用 API 进行登录，然后选择云审计服务。您可以使用腾讯云上的产品，而 CloudAudit 会记录下您查看过的产品以及进行的操作，查看和搜索过去7天由 CloudAudit 记录的事件。
-  操作  
当您登录进入控制台后，可以进行创建、修改云主机的配置、删除等行为，但是您的这些行为会被记录下来，当您需要对云上的资源操作记录进行回溯时，可以查看这些记录，我们的操作记录上会记载着您操作事件ID、操作时间、操作名称、资源类型等方面的信息。
-  创建跟踪
当展示的不只是最近7天的操作记录时通过跟踪，您可以创建跟踪集，存储的路径根据自己的需要进行创建，跟踪集会记录下您所有的操作记录。CloudAudit 可将日志文件传送至您设置路径下的文件中。默认情况下，在控制台中创建跟踪时，此跟踪应用于所有区域。

-  查看记录文件
使用 CloudAudit 功能模块：操作记录或者跟踪集进行查看。

-  记录管理和数据事件
将您的跟踪配置为记录只读、只写或所有管理和数据事件。默认情况下，跟踪会记录管理事件。

-  启用日志加密
日志文件加密为您的日志文件提供额外的安全层。

-  启用日志文件完整性
日志文件完整性验证可帮助您验证日志文件在由 CloudAudit 传送后是否一直保持不变。

-  聚合多个账户中的日志
您可以将多个账户中的日志文件聚合到单个存储桶中。

-  使用合作伙伴解决方案
使用与 CloudAudit 集成的合作伙伴解决方案来分析您的 CloudAudit 输出。合作伙伴解决方案提供了一组广泛的功能，例如，更改跟踪、故障排除和安全分析。
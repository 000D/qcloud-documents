## Structure of Returned Result
Unless otherwise specified, the returned result of each request will contain the following fields:

<table class="t">
<tbody><tr>
<th><b>Name</b>
</th><th><b>Type</b>
</th><th><b>Description</b>
</th><th width="50"><b>Required</b>
</th></tr>
<tr>
<td> code
</td><td> Int
</td><td> Error code. 0: succeeded; other values: failed For details on the meaning of an error code, refer to <a href="/doc/api/258/Error Code List" title="Error Code List">Error Code List</a>. 
</td></tr>
<tr>
<td> message
</td><td> String
</td><td> Indicates a request result. 
</td></tr></tbody></table>

For example:
Request that uses public parameters:

```
 https://live/v2/index.php?Action=DescribeInstances&SecretId=xxxxxxx&Region=gz
 &Timestamp=1402992826&Nonce=345122&Signature=mysignature&instanceId=101
```


Possible returned result is as follows:

```
{
    "code":0,
    "message": "success",
    "instanceSet":
   [{
        "instanceId":"qcvm1234",
        "cpu":1,
        "mem":2,
        "disk":20,
        "bandwidth":65535,
        "os":"centos_62_64",
        "lanIp":"10.207.248.186",
        "wanIp":null,
        "status":0
   }]
}
```

## Error Code
The error code in a response packet reflects the result of Cloud API calling and execution. 
If an error code is not 0, a request is not properly executed. An error message describes the error in details. Users can determine API execution result based on the error code. 
For some terminals, for example, browsers, the message is in Unicode format and needs to be decoded. 

**The following table lists the error codes that may be returned through the Tencent Cloud APIs:**
<table class="t">
<tbody><tr>
<th> <b>Error Code</b>
</th><th> <b>Error Type</b>
</th><th><b>Description</b>
</th></tr>
<tr>
<td> 4000
</td><td> Invalid request parameter
</td><td> Necessary parameters are missing, or the format of parameter values is incorrect. For details on the error message, refer to the message field of an error description. 
</td></tr>
<tr>
<td> 4100
</td><td> Authentication failure
</td><td> Signature authentication fails. For details, refer to the Authentication section in the reference document.
</td></tr>
<tr>
<td> 4200
</td><td> Request expiry
</td><td> A request expired. For details, refer to the request validity section in the reference document.
</td></tr>
<tr>
<td> 4300
</td><td> Access denial
</td><td> An account is disabled or is not within the user range of corresponding API. 
</td></tr>
<tr>
<td> 4400
</td><td> Quota excess
</td><td> The number of requests exceeds the quota limit. For details, refer to the request quota section in the reference document.
</td></tr>
<tr>
<td> 4500
</td><td> Replay attack
</td><td> The Nonce and Timestamp parameters ensure that each request will be executed on the CVM once only. Therefore, the Nonce cannot be consistent with the previous value. The difference between the Timestamp and Tencent CVM cannot be greater than 2 hours. 
</td></tr>
<tr>
<td> 4600
</td><td> Unsupported protocol
</td><td> A protocol is not supported. For details, refer to the reference document. 
</td></tr>
<tr>
<td> 5000
</td><td> Resource not exist
</td><td> The instance that a resource ID specifies does not exist, or the instance has been returned, or other user resources are accessed. 
</td></tr>
<tr>
<td> 5100
</td><td> Resource operation failure
</td><td> Operation on a resource fails. For details on the error message, refer to the message field of error description. Try again later or contact customer service personnel for help. 
</td></tr>
<tr>
<td> 5200
</td><td> The resource purchase failed
</td><td> Purchasing a resource fails. The instance configuration may be unsupported, or the resource is insufficient. 
</td></tr>
<tr>
<td> 5300
</td><td> The resource purchase failed
</td><td> Purchasing a resource fails, because the remaining balance is insufficient. 
</td></tr>
<tr>
<td> 5400
</td><td> Partial execution failure
</td><td> A batch operation partially succeeds. For details, refer to the returned result. 
</td></tr>
<tr>
<td> 5500
</td><td> User qualification verification failed
</td><td> Purchasing a resource fails, because user qualification review fails. 
</td></tr>
<tr>
<td> 6000
</td><td> Internal error of the CVM
</td><td> An internal error occurs on the CVM. Try again later or contact customer service personnel for help. 
</td></tr>
<tr>
<td> 6100
</td><td> Version support problem
</td><td> This API is not supported in this version, or the API is being maintained.  Note:  When this error occurs, make sure that the domain name of the API is correct. Different modules may have different domain names.
</td></tr>
<tr>
<td> 6200
</td><td> API access failure
</td><td> The API is being maintained. Please try again later. 
</td></tr></tbody></table>

## Format of Returned Result for Asynchronous APIs
### 1. Format of Returned Result for Common Asynchronous APIs
An asynchronous API can operate one resource for each request, for example, creating load balance or resetting CVM OS. 
<table class="t">
<tbody><tr>
<th><b>Name</b>
</th><th><b>Type</b>
</th><th><b>Description</b>
</th><th><b>Required</b>
</th></tr>
<tr>
<td> code
</td><td> Int
</td><td> Error code. 0: succeeded; other values: failed
</td><td> Yes
</td></tr>
<tr>
<td> message
</td><td> String
</td><td> Error information returned
</td><td> No
</td></tr>
<tr>
<td> requestId
</td><td> String
</td><td> Task ID 
</td><td> Yes
</td></tr></tbody></table>

### 2. Format of Returned Result for Batch-Operation Asynchronous APIs
An API can operate multiple resources for each request, for example, changing passwords, starting machines, or stopping machines. 
<table class="t">
<tbody><tr>
<th><b>Name</b>
</th><th><b>Type</b>
</th><th><b>Description</b>
</th><th><b>Required</b>
</th></tr>
<tr>
<td> code
</td><td> Int
</td><td> Error code. 0: succeeded; other values: failed
</td><td> Yes
</td></tr>
<tr>
<td> message
</td><td> String
</td><td> Error information returned
</td><td> No
</td></tr>
<tr>
<td> detail
</td><td> Array
</td><td> The code, message, and task ID (requestId) for an operation on the resource are returned based on the resource ID (key). 
</td><td> Yes
</td></tr></tbody></table>

For example:

```
{
        "code":0,
        "message": "success",
        "detail":
        {
             "qcvm6a456b0d8f01d4b2b1f5073d3fb8ccc0":
            {
             "code":0,
             "message":"",
             "requestId":"1231231231231":,
            }
              "qcvm6a456b0d8f01d4b2b1f5073d3fb8ccc0":
            {
              "code":0,
              "message":"",
              "requestId":"1231231231232":,
            }
        }
}
```
>Note:
If all resources are successfully operated, the outermost error code is 0. 
If all resources fail to be operated, the outermost error code is 5100.
If part of resources fail to be operated, the outermost error code is 5400.
In the third case, a client can obtain the operation information according to the detail field. 

## Examples
### 1. Downloading SDK code
**"Code in PHP"(https://github.com/QcloudApi/qcloudapi-sdk-php)**
**"Code in Java"(https://github.com/QcloudApi/qcloudapi-sdk-java)**
**"Code in Python"(https://github.com/QcloudApi/qcloudapi-sdk-python)**
**"Code in .NET"(https://github.com/QcloudApi/qcloudapi-sdk-dotnet)**

Replace the YOUR_SECRET_ID and YOUR_SECRET_KEY with the actual SecretId and SecretKey. 
The codes are for reference only. 

### 2. Example of PHP code

```
<?php


/***************The following parameters should be changed according to the APIs called.*********************************/
/***************The DescribeInstances API is used to describe how to obtain the CVM of a specified instance ID.**********/

/*The URL of the DescribeInstances API is cvm.api.qcloud.com, which can be obtained from the corresponding "1. API Description".*/
$HttpUrl="cvm.api.qcloud.com";

/*Unless otherwise specified, common APIs support the GET and POST methods. MultipartUploadVodFile is an exception.*/
$HttpMethod="GET"; 

/*Most APIs implement communication over HTTPS. A few APIs, for example, MultipartUploadVodFile, do not support HTTPS.*/
$isHttps =true;

/*A key must be entered. The secret ID and secret key can be obtained from https://console.qcloud.com/capi.*/
$secretKey='XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX';


/*The following parameters are the public parameters of all APIs. For APIs that do not specify area (for example, DescribeDeals), the Region parameter can be ignored.*/
$COMMON_PARAMS = array(
        'Nonce'=> rand(),
        'Timestamp'=>time(NULL),
        'Action'=>'DescribeInstances',
        'SecretId'=> 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
        'Region' =>'gz',
);

/*The following parameters are the private parameters of the DescribeInstances API and used to query specific CVM list.*/
$PRIVATE_PARAMS = array(
        'instanceIds.0'=> 'qcvm00001',
        'instanceIds.1'=> 'qcvm00002',
);


/***********************************************************************************/


CreateRequest($HttpUrl,$HttpMethod,$COMMON_PARAMS,$secretKey, $PRIVATE_PARAMS, $isHttps);


function CreateRequest($HttpUrl,$HttpMethod,$COMMON_PARAMS,$secretKey, $PRIVATE_PARAMS, $isHttps)
{
    $FullHttpUrl = $HttpUrl."/v2/index.php";
    
    /***************Request parameters are sorted based on their parameter names in lexicographic order in an ascending order. The sorting is case-sensitive.*************/
    $ReqParaArray = array_merge($COMMON_PARAMS, $PRIVATE_PARAMS);
    ksort($ReqParaArray);
    
    /**********************************Generate signature source text.**********************************
     * Combine the request method, URL, and sorted request methods according to the following format to generate signature source text. The source text is as follows: 
     * GETcvm.api.qcloud.com/v2/index.php?Action=DescribeInstances&Nonce=345122&Region=gz
     * &SecretId=AKIDz8krbsJ5yKBZQ	Â·1pn74WFkmLPx3gnPhESA&Timestamp=1408704141
     * &instanceIds.0=qcvm12345&instanceIds.1=qcvm56789
     * ****************************************************************************/
    $SigTxt = $HttpMethod.$FullHttpUrl."?";
    
    $isFirst = true;
    foreach ($ReqParaArray as $key => $value)
    {
        if (!$isFirst) 
        { 
            $SigTxt = $SigTxt."&";
        }
        $isFirst= false;
        
        /*If a parameter name contains underscore "_", the character must be replaced with ".".*/
        if(strpos($key, '_'))
        {
            $key = str_replace('_', '.', $key);
        }
        
        $SigTxt=$SigTxt.$key."=".$value;
    }
    
    /*********************Generate a signature according to the signature source text $SigTxt.******************/
    $Signature = base64_encode(hash_hmac('sha1', $SigTxt, $secretKey, true));

    
    /***************The request parameters and signature of strings must be encoded using URL.********************/
    $Req = "Signature=".urlencode($Signature);
    foreach ($ReqParaArray as $key => $value)
    {
        $Req=$Req."&".$key."=".urlencode($value);
    }
    
    /*********************************Send requests.********************************/
    if($HttpMethod === 'GET')
    {
        if($isHttps === true)
        {
            $Req="https://".$FullHttpUrl."?".$Req;
        }
        else
        {
            $Req="http://".$FullHttpUrl."?".$Req;
        }
        
        $Rsp = file_get_contents($Req);
        
    }
    else
    {
        if($isHttps === true)
        {
        	$Rsp= SendPost("https://".$FullHttpUrl,$Req,$isHttps);
        }
        else
        {
        	$Rsp= SendPost("http://".$FullHttpUrl,$Req,$isHttps);
        }
    }
    
    var_export(json_decode($Rsp,true));
}

function SendPost($FullHttpUrl,$Req,$isHttps)
{
	
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $Req);
        
        curl_setopt($ch, CURLOPT_URL, $FullHttpUrl);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        if ($isHttps === true) {
            curl_setopt($ch, CURLOPT_SSL_VERIFYPEER,  false);
            curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,  false);
        }
        
        $result = curl_exec($ch);
        
        return $result;
}
```

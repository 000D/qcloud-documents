## Solution Overview
The LVB code solution is a **LVB channel management solution** different from channel hosting. Their differences are as follows:

The [Channel Hosting](https://www.qcloud.com/doc/api/258/5659) mode is applicable to LVB activities because the operation entries of various functions from channel creation, to address management, to broadcasting banning, and to backend watermarking are displayed on the Web page of the [Console](https://console.qcloud.com/live). You can click required entries to complete all operations.

In scenarios in which LVB channels need to be frequently created and managed, for example, for LVB APPs such as inke and huajiao, this mode is handicapping: The channel needs to synchronize the VJ channel name, description, status, address, and other information with the Tencent Cloud backend, and needs to understand the internal security protection rules: for example, the maximum access count (x) are posed on backend APIs every second, or the channel that is not stopped cannot be deleted.

The **LVB code solution** is more applicable to non-manual scenarios. In these scenarios, the control and management of LVB streams are completely under the control of customers. In addition to low interworking difficulty, this solution is highly customizable:
(1)**The push and play addresses can be defined independently**: Customers do not need to apply to Tencent Cloud for the push or play URL but define them independently. For example, most customers can push streams after they combine user account IDs to obtain push URLs.
(2) **This solution is more applicable to development of LVB APPs**: In the LVB code solution, Tencent Cloud focuses on audio/video-relevant functions such as push, transcoding, CDN distribution, recording, and security protection, and does not impose excessive limitations and intervention on the status, list, and address. Customers can independently implement their business scenarios or use Tencent Cloud backend APIs to obtain channel information, with no need to conform to various limitation rules of Tencent Cloud backend. The solution is highly free and is applicable to complex LVB application scenarios such as LVB APPs.

![](//mccdn.qcloud.com/static/img/aa6cf00971df050b3b781b126064131f/image.png)

## Interworking Guide

It is very easy to deploy the LVB code solution. Perform the following steps to implement interworking with the LVB code solution. Then, you can have a super simple LVB backend:

### 1. Enable the LVB code mode.
The initial access mode of Tencent Cloud video LVB server is the channel hosting mode. You need to manually switch to the LVB code mode. For switching operations, see [Service Activation] (https://www.qcloud.com/doc/api/258/6100).


### 2. Assign the push address.
a VJ needs to apply to your backend server for a push address before starting push. The push addresses of LVB code conform to certain assembly rules, as shown in the following figure:
![](//mc.qcloudimg.com/static/img/6ea8ebb159c57fc4ef934a5e57a55dcd/image.png)

- **BIZID**: 
In the preceding figure, 8888 is an example and indicates the BIZID assigned by Tencent Cloud to you. You can find BIZID in the top area of the [LVB Console](https://console.qcloud.com/live), as shown in the following figure:
![](//mc.qcloudimg.com/static/img/1400072859844bc1fa5dcf45bfa205c1/image.png)

- **LVB code**:
In the preceding figure, 8888_test_12345_test is the LVB code. It must be prefixed with **BIZID+underline** and the subsequent section can be freely specified, but ensure that it does not conflict with the assigned LVB codes.

- **Hotlink protection signature**:
In the preceding figure, "txTime" indicates the URL expiration time while "txSecret" indicates the hotlink protection signature. The combination of the two parts is used to implement security protection. For details, see "Security Protection" (https://www.qcloud.com/doc/api/258/5693).

- **Address generator**:
An address generator is provided on the console for you to test URLs. After all, it is inconvenient to manually compute hotlink protection signatures:
![](//mc.qcloudimg.com/static/img/7e0b45fcf24595bfb31da3e3dbc8812e/image.png)

> **How do other customers do?**
> Many customers use the user account ID as the LVB code, for example, your BIZID is 2121 on Tencent Cloud LVB platform, and most of your users register their mobile phone numbers with the platform. Therefore, the account is the mobile phone number of a user (such as 15919131751). Then, you can assign a push address to the user:
> 
>  `rtmp://2121.livepush.myqcloud.com/live/2121_15919131751?txSecret=aaa&txTime=bbb`


### 3. Manage the LVB list.
You can maintain an LVB channel list as required. The following figure shows a recommended implementation solution:
![server](//mccdn.qcloud.com/static/img/56bb81fdbc4c5ab4cdea9448cbe3554c/image.png)

- **Step1:  Initiate LVB**: 
>The APP requests a push URL from the server before initiating the LVB. The generation of the push URL has been described above.
>
>When the server returns a push URL to your APP, the server needs to add one record to the LVB list. The most important information in the record is **LVB code** and **user ID** (many customers directly use user IDs as their room IDs to facilitate management). In addition, you can add **cover picture address**, **thumbs-up clicking count**, **current watcher count**, and other information to the list as required.

- **Step 2:  End LVB**: 
>When the APP ends LVB, it also needs to notify the server. Then, the server deletes relevant records at the first time. Otherwise, the LVB list is full of offline VJ channels.

- **Step 3:  Handle an emergency**: 
> Unexpected incidents may occur, for example, the VJ APP crashes or the traffic is used up. In this case, the APP is unable to notify the server that the VJ is offline and some "zombie channels" remain in the LVB list. There are two solutions:
> 
> (Solution 1) You can use the **[Message Notification Service](https://www.qcloud.com/doc/api/258/5957)** of Tencent Cloud: Your server can register one **callback URL** for Tencent Cloud. Tencent Cloud will notify you when the status of your concerned channel is changed. The response of this solution is instant.
> 
> (Solution 2) You can use the status query API of Tencent Cloud (**[Live_Channel_GetStatus](https://www.qcloud.com/doc/api/258/5958)**) to periodically check whether all channels that are <font color='red'>"under LVB"</font> are really in the "push" state. The response of this solution is unsatisfactory when too many channels need to be queried. The recommended call way is one-minute polling. If a channel is offline in three consecutive polling acts, you may consider setting its status to offline.
>
> (Solution 3) You can add the **heartbeat mechanism** between the APP and server: When a VJ pushes streams, one heartbeat packet is sent to the server per second. If the server fails to receive a heartbeat packet for consecutive three times, the server considers that the VJ is offline.

### 4. Interwork with the LVB for video play.
With the LVB code, you can assemble the push address and play address. The following figure shows the RTMP, FLV, and HLS play addresses assembled using the LVB code **8888_test_12345_test**. After obtaining the play address, the APP can send it to the Tencent Cloud RTMP SDK for play:
![play](//mccdn.qcloud.com/static/img/8438aadc91d16a1f02921bb178881893/image.png)

>**Note**
> <font color='red'>It is strongly recommended that play addresses not be assembled on the APP</font>. Otherwise, the logic is locked on the APP code. It is recommended that the server return the play address to the APP after assembly, to facilitate subsequent extension. For example, with the product development, you may need to add more parameters and suffixes to the address to implement more features.

### 5. Interwork with recording and playback.
Recording and playback refers that you can record the LVB process as an online on-demand video and provide it to your APP users for playback. For details on the interworking, see [Recording and Playback](https://www.qcloud.com/doc/api/258/5691).





## 1. API Description

- **API**
  - **Live_Tape_GetFilelist**: Used to query recorded files generated by one LVB stream as of the calling time.

- **Address**
  - The API call address is:  http://<font color='red'>fcgi.</font>video.qcloud.com/common_access

- **Description**
  - You are unclear of the file generation time and you cannot properly determine the calling time of the active query API. Therefore, the [Passive Event Notification](https://www.qcloud.com/doc/api/258/5957)(event_type = 100) mechanism is recommended.

## 2. Input Parameters

| Parameter | Description | Type | Remarks | Required (Yes/No) |
|---------|---------|---------|---------|---------|
| cmd | Client ID | int | That is, the LVB APPID, used to distinguish the identity of different clients | Y | 
| interface | API name | string | For example, Get_LivePushStat | Y | 
| t | [Valid time](https://www.qcloud.com/doc/api/258/5956#.E5.AE.89.E5.85.A8.E6.A3.80.E6.9F.A5 ) | int | UNIX timestamp (decimal) | Y | 
| sign | [Security signature](https://www.qcloud.com/doc/api/258/5956#.E5.AE.89.E5.85.A8.E6.A3.80.E6.9F.A5 ) | string | MD5 (key + t) | Y | 
| Param.s.channel_id | LVB ID | string | | Y |
| Param.n.page_no   | Page number  | int  | Starts from 1. The default value is 1. | N |
| Param.n.page_size | Page size | int   |1-100. The default value is 10.  | N |

> The LVB ID parameter in some early APIs is defined as channel_id, and is stream_id in the new API, which is only for the historical reason.

## 3. Output Results
| Parameter | Description | Type | Remarks            |
|---------|---------|---------|------------------|
| ret | error code | int | 0: succeeded; other values: failed |
| message | Error information | string | Error information |
| Output | Message content |   array  | Details |

The output content is:

| Field name | Description | Type | Remarks                 |
|---------|---------|---------|------------------|
| all_count | Total fragment count    |   int      |    |
| file_list    | Fragment file information |   array  | See the following description.  |

file_list is described as follows:

| Field name | Description | Type | Remarks                 |
|---------|---------|---------|------------------|
| vid | Total fragment count    |   int      |            |
| start_time   | Fragmentation start time|   string  |   The time cannot be accurate to seconds due to interference of the I frame position. |
| end_time    | Fragmentation end time |   string  |  The time cannot be accurate to seconds due to interference of the I frame position.  |
| file_id        | VOD file_id     |   string  |  The VOD API needs to be exchanged for the play URL.     |

 
## 4. Call Examples
Purpose: To query the list of files recorded by the LVB stream with the LVB code of 8888_test123 in the LVB process.

| Component |   Example Content           |
|-------------|------------------|
| API URL | http://fcgi.video.qcloud.com/common_access? |
|cmd       | 1234 |
|interface       | Live_Tape_GetFilelist |
|Param.s.channel_id | 8888_test123 |
|Param.n.page_no | 1 |
|Param.n.page_size | 20 |
|t |1471850187 |
|sign | b17971b51ba0fe5916ddcd96692e9fb3 |

```
// When copying them, please remove invisible line feeds used for beautifying layout. Otherwise, "cmd is invalid" or other URL assembly errors may occur
URL = http://fcgi.video.qcloud.com/common_access?
			cmd=1234&interface=Live_Tape_GetFilelist
			&Param.s.channel_id=8888_test123
			&Param.n.page_no=1
			&Param.n.page_size=20
			&t=1471850187&sign=b17971b51ba0fe5916ddcd96692e9fb3
```
			






﻿
 ## Function Introduction
Recording playback means that you can record the entire LVB process and view them as VOD programs, as shown below:
![](//mccdn.qcloud.com/static/img/a8240c996be9eab19d5dc40b9e3df779/image.png)
At the early launch stage of the App, because of the relatively small number of VJs, adding recording playback in the broadcast list can increase to some degree App resources at the viewer end. Even when VJs increase to a certain scale with APP growth, accumulation of good LVB contents is necessary. In the personal statement of each VJ, in addition to the name, photos and personal information, video history is also an essential part.

## Enabling Service
Recording playback relies on the backend cluster support of Tencent Cloud **VOD**. If you want to interwork with this feature, you first need to activate [VOD](http://console.qcloud.com/video) on Tencent Cloud console .

After the VOD service is enabled, newly recorded files can also be found in the [Video management](http://console.qcloud.com/video/videolist) on the VOD console.

## Enable Recording
Tencent Cloud supports recording the entire LVB process. You can enable the recording service in two methods:

-**Method 1: Globally enabling **
You can enable or disable recording for LVB streams on [LVB Console](https://console.qcloud.com/live), as shown below:
![](//mc.qcloudimg.com/static/img/fd4a3e35fdb486d9d9053fe7f29760a8/image.png)

-**Method 2: Specifically enabling**
When the recording of all LVB video streams is disabled, you can still enable recording for a very important video stream. The operation method is as follows: add the **&record=flv** or **&record=mp4** parameter to the end of the push URL. See the following figure:
```
rtmp://2121.livepush.myqcloud.com/live/2121_15919131751?txSecret=aaa&txTime=bbb&record=flv
```

## File Generation
-**Method 1: Message notification**
You can use Tencent Cloud **[Event notification service](https://www.qcloud.com/doc/api/258/5957)**: Your server registers its **callback URL** on Tencent Cloud, which notifies you via this URL when a new recording file is generated.

 The following is a typical notification message, which means: a newly recorded flv file with ID 9192487266581821586 has been generated, and the playback address is 'http://200025724.vod.myqcloud.com/200025724_ac92b781a22c4a3e937c9e61c2624af7.f0.flv'.
```json
{
    "channel_id": "2121_15919131751",
    "end_time": 1473125627,
    "event_type": 100,
    "file_format": "flv",
    "file_id": "9192487266581821586",
    "file_size": 9749353,
    "sign": "fef79a097458ed80b5f5574cbc13e1fd",
    "start_time": 1473135647,
    "stream_id": "2121_15919131751",
    "t": 1473126233,
    "video_id": "200025724_ac92b781a22c4a3e937c9e61c2624af7",
    "video_url": "http://200025724.vod.myqcloud.com/200025724_ac92b781a22c4a3e937c9e61c2624af7.f0.flv"
}
```

-**Method 2: Active query**
You can check regularly if any newly recorded file is generated using Tencent Cloud file query API (**[Live_Tape_GetFilelist](https://www.qcloud.com/doc/api/258/5960)**). However, when you query a large number of channels, the response speed of this method is not ideal and calling frequency cannot be too high (it is appropriate to call the channel whose LVB was just completed). This methods provides relatively low timeliness and reliability and its frequent use is not recommended.

## Video Playback
After obtaining the recorded file, your server can generate a playback URL, which the App obtains and delivers to the VOD playback module of the RTMP SDK. Then the recorded file is available for playback:
- [iOS platform reference](https://www.qcloud.com/doc/api/258/4738)
- [Android platform reference](https://www.qcloud.com/doc/api/258/4739)
- [Web platforms reference](https://www.qcloud.com/doc/api/258/5706)
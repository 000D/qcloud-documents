
## Calling Mode
There are two calling modes, active request and passive notification.
![](//mc.qcloudimg.com/static/img/ae90fa870c89c023a409988377de0bdc/image.png)

### Active Request
The customer server actively calls a Tencent Cloud backend API to query required information or control the LVB streams. The following table describes the APIs:

| API                                | Function |
|---------------------------------|--------------------------------------------------------------|
| [Get_LiveStat](https://www.qcloud.com/doc/api/258/6110) | Query Statistics - push and playback information |
| [Get_LivePushStat](https://www.qcloud.com/doc/api/258/6110) | Query Statistics – push information |
| [Get_LivePlayStat](https://www.qcloud.com/doc/api/258/6110) | Query Statistics - playback information |
| [Live_Channel_GetStatus](https://www.qcloud.com/doc/api/258/5958) | Queries status information for a channel (old version API) | 
| [Live_Channel_SetStatus](https://www.qcloud.com/doc/api/258/5959) | **Ban** a stream, mainly used for the pornography checking| 
| [Live_Tape_GetFilelist](https://www.qcloud.com/doc/api/258/5960) | Query the list of files **recorded** during the broadcast of a channel | 
| [Live_Queue_Get](https://www.qcloud.com/doc/api/258/5961) | Query the list of **screenshot files** for a channel during the broadcast| 


### Passive Notification
[Notification Service](https://www.qcloud.com/doc/api/258/5957) allows Tencent Cloud backend service cluster to notify your servers about key events. To enable this, you need to register a URL for receiving event notifications at Tencent Cloud. Supported notification types include:
 
| Event type   | Function |
|:-------------------------------:|--------------------------------------------------------------|
| 0 | A live stream interrupts | 
| 1 | A live stream starts or resumes| 
| 100 | A new recorded file is generated | 
| 200 | A new screenshot file is generated | 

## Security Check

### Solution Introduction
LVB code-relevant backend APIs do not use the HTTPS access mode for the sake of performance. Therefore, security check is very important. LVB code-relevant server APIs use the same unified security check method, that is, **t + sign verification**:
- **t (expiry time)**: If the t value specified in an API request or notification has expired, the request or notification is invalid. The purpose is to prevent network replay attacks. The value of t is the UNIX timestamp, that is, the number of seconds that have elapsed since January 1, 1970 (UTC/GMT midnight).

- **sign (security signature)**:  <font color='blue'>sign = MD5(key + t) </font>, that is, the strings of encryption key and t are combined to compute the MD5 value. The key here is the key called by CGI. You can specify it when activating the LVB code service on the Tencent Cloud LVB console, as shown in the following figure:
![](//mc.qcloudimg.com/static/img/28a16dbab36fc3867301d2311204b8e4/image.png)

MD5 is an irreversible hash algorithm. As long as the key is not disclosed, attackers cannot compute the key or launch spoofing attacks even if they get many pairs of t and sign.

### Verification Objects

- **Active Request**
In active request scenarios, the calling party is your backend server and the called party is Tencent backend cluster. Therefore, t+sign is generated by your backend server and appended to the request header. Then, the Tencent Cloud backend conducts security verification on it to ensure that the request is from a real Tencent Cloud customer.

- **Passive Notification**
In passive notification scenarios, notifications are sourced from the Tencent Cloud backend cluster, and the notified party is your backend server. Therefore, "t+sign" is generated by Tencent Cloud and appended to the notification. Then, your backend server conducts security verification on it to ensure that the notification is from Tencent Cloud.


### Example
- **Computing t**
   For example, our current time is 2016-08-22 15:16:27 and the validity period is 1 minute. That is, the request or notification carrying t that is received later than 2016-08-22 15:16:27 is invalid.
```
	t = "2016-08-22 15:17:27" = 1471850187
```
  
- **Computing sign**
    Assume that the key is **5d41402abc4b2a76b9719d911017c592**, then the resulted signature should be:
```
	sign = MD5(5d41402abc4b2a76b9719d911017c5921471850187) = b17971b51ba0fe5916ddcd96692e9fb3
```
 
 




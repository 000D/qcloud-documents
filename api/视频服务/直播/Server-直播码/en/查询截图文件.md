
## 1. API Description

- **API**
  - **Live_Queue_Get**: Queries screenshot files generated by a channel during LVB.

- **Address**
  - The API call address is:  http://<font color='red'>fcgi.</font>video.qcloud.com/common_access

- **Use**
  - Tencent Cloud provides scheduled screenshot capture service for LVB. After you enable this service, you will receive a screenshot file of the LVB stream every several seconds.
  - Our customers often use this service for pornography identification, or LVB game customers use this service to periodically update the LVB cover on the Web page.

- **Description**
  - Screenshot files are generated frequently and the file quantity is large, especially when there are many LVB channels. Therefore, Tencent Cloud provides the query service for customers in the form of message queues.
  - A **message queue** is a screenshot file queue. When a new screenshot picture is generated by the LVB channel, the picture ID and LVB code are placed in the dedicated message queue in the form of messages. You can periodically call the API to retrieve the latest screenshot message.
  - <font color='red'>The screenshot service is not a fully open service</font>. It provides API support only for VIP customers. The API is ineffective before the screenshot-relevant service is activated.

- **History**
  - Live_Queue_Get is planned to be used to retrieve various types of messages. As the [Notification Mechanism](https://www.qcloud.com/doc/api/258/5957) is progressively accepted by many customers, this service is not widely applied. Currently, this service is mainly used to provide services for highly frequent events such as the screenshot event.


## 2. Input Parameters

| Parameter | Description | Type | Remarks | Required (Yes/No) |
|---------|---------|---------|---------|---------|
| cmd | Client ID | int | That is, the LVB APPID, used to distinguish the identity of different clients | Y | 
| interface | API name | string | For example, Get_LivePushStat | Y | 
| t | [Valid time](https://www.qcloud.com/doc/api/258/5956#.E5.AE.89.E5.85.A8.E6.A3.80.E6.9F.A5 ) | int | UNIX timestamp (decimal) | Y | 
| sign | [Security signature](https://www.qcloud.com/doc/api/258/5956#.E5.AE.89.E5.85.A8.E6.A3.80.E6.9F.A5 ) | string | MD5 (key + t) | Y | 
| Param.n.bid   | Message queue ID  | int  | 100: dedicated queue ID of the screenshot service | Y |
| Param.n.count | Number of messages obtained at a time | int   |1-100. The default value is 1. | N |

## 3. Output Results
| Parameter | Description | Type | Remarks            |
|---------|---------|---------|------------------|
| ret | error code | int | 0: succeeded; other values: failed |
| message | Error information | string | Error information |
| Output | Message content |   array  | Details |

The output content is:

| Field name | Description | Type | Remarks                 |
|---------|---------|---------|------------------|
| count | Quantity    |   int      |    |
| data    | Screenshot URL list |   array  | See the following description.  |

data is described as follows:

| Field name | Description | Type | Remarks                 |
|---------|---------|---------|------------------|
| stream_id | LVB code    |   string      |            |
| pic_url   | Screenshot URL|   string  |   A complete URL is:  http://(cos_bucketname)-(cos_appid).file.myqcloud.com/file name|
| create_time | Screenshot creation time |   int  |  The time cannot be accurate to seconds due to interference of the I frame position.  |

## 4. Call Examples

Purpose: To query screenshot files generated by all LVB channels under your current account.

| Component |   Example      |
|-------------|------------------|
| API URL | http://fcgi.video.qcloud.com/common_access? |
|cmd       | 1234 |
|interface       | Live_Queue_Get |
|Param.n.bid | 100 |
|Param.n.count | 10 |
|t |1471850187 |
|sign | b17971b51ba0fe5916ddcd96692e9fb3 |

```
// When copying them, please remove invisible line feeds used for beautifying layout. Otherwise, "cmd is invalid" or other URL assembly errors may occur
URL = http://fcgi.video.qcloud.com/common_access?
			cmd=1234&interface=Live_Queue_Get
			&Param.n.bid=100
			&Param.n.count=10
			&t=1471850187&sign=b17971b51ba0fe5916ddcd96692e9fb3
```
			
			







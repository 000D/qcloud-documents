
## 1. API Description
- **API**
   - **Get_LiveStat**: Queries the push and play information about a specified LVB stream.
   - **Get_LivePushStat**: Returns only push statistics to improve the query efficiency.
   - **Get_LivePlayStat**: Returns only play statistics to improve the query efficiency.
- **Address**
   - The API call address is:  http://<font color='red'>statcgi.</font>video.qcloud.com/common_access
- **Use**
   - Call this API to query statistics about an LVB stream (such as watcher count, bandwidth, bit rate, and frame rate).
   - Call this API to query statistics about multiple LVB streams that are in the LVB state (paged query is recommended to prevent excessive returned data packets per time).
- **Description**
   - Statistics are instantaneous statistics at the query time point rather than historically accumulated data.
   - <font color='red'>If a target stream is not in the LVB state, the output field is blank in the return result. </font>
   - Push statistics are updated once every **5 seconds**, indicating that the query frequency shorter than 5 seconds per time is wasteful.
   - Play statistics are updated once every **1 minute**, indicating that the query frequency shorter than 60 seconds is wasteful.
- **BETA**
   - The statistics API is in the Beta phase currently and is not fully opened. Therefore, when this API is called before Beta is activated, the "<font color='red'>cmd is invalid </font>" prompt is displayed. If you need to use this API urgently, contact us.


## 2. Input Parameters

|        Parameter        | Description                                     | Type     | Remarks                                       | Required (Yes or Not) |
| :---------------: | ---------------------------------------- | ------ | ---------------------------------------- | :--: |
|        cmd        | Customer ID                                     | int    | It is the LVB APPID, which is used for differentiating the identities of different customers.                     |  Y   |
|     interface     | API name                                     | string | Example: Get_LivePushStat                       |  Y   |
|         t         | [Effective time](https://www.qcloud.com/doc/api/258/5956#.E5.AE.89.E5.85.A8.E6.A3.80.E6.9F.A5) | int    | UNIX timestamp (decimal notation)                             |  Y   |
|       sign        | [Security signature](https://www.qcloud.com/doc/api/258/5956#.E5.AE.89.E5.85.A8.E6.A3.80.E6.9F.A5) | string | MD5(key+t)                               |  Y   |
|  Param.n.page_no  | Page number                                     | int    | The value starts from 1 and the default value is 1.                                |  N   |
| Param.n.page_size | Page size                                     | int    | 1-300. The default value is 300.                             |  N   |
| Param.s.stream_id | LVB code                                      | string | <font color='red'>If stream_id is not set, all streams that are in the LVB state are queried.</font> |  N   |


## 3. Output Results
### Get_LiveStat
| Parameter     | Description | Type     | Remarks          |
| ------- | ---- | ------ | ----------- |
| ret     | Error code  | int    | 0: success; other values: failure|
| message | Error information | string | Error information        |
| output  | Message content | array  | See the following description.        |

The output content is:

| Field name             | Description               | Type     | Remarks                 |
| --------------- | ---------------- | ------ | ------------------ |
| stream_count | Number of all online LVB streams | int | 1 returned when stream_id is specified in the request |
| stream_info     | LVB stream statistics          | array  | Details               |
| total_bandwidth | Total bandwidth for the current account upon query | double | Unit: Mbps |
| total_online    | Total number of online persons for the current account upon query | int    | Unit: Person               |

The stream_info content is:

| Field name         | Description          | Type     | Remarks      |
| ----------- | ----------- | ------ | ------- |
| stream_name | LVB ID         | string | -       |
| bandwidth | Instantaneous bandwidth occupied of the LVB stream | double | Unit: Mbps |
| online      | Number of instantaneous online persons for the current account upon query | int    | Unit: Person    |
| client_ip   | IP address of the push client     | string | -       |
| server_ip   | IP address of the push server     | string | -       |
| fps         | Frame rate of instantaneous push      | int    | -       |
| speed       | Bit rate of instantaneous push      | int    | bps     |

### Get_LivePushStat
The output of Get_LivePushStat is a subset of Get_LiveStat:

| Field          | Description         | Type    | Remarks                 |
| ------------ | ---------- | ----- | ------------------ |
| stream_count | Number of all online LVB streams | int   | If stream_id is specified in a request, 1 is returned. |
| stream_info  | LVB stream statistics    | array | See the following description.               |

The stream_info content is:

| Field         | Description      | Type     | Remarks   |
| ----------- | ------- | ------ | ---- |
| stream_name | LVB code     | string | -    |
| client_ip   | IP address of the push client | string | -    |
| server_ip   | IP address of the push server | string | -    |
| fps         | Frame rate of instantaneous push  | int    | -    |
| speed       | Bit rate of instantaneous push  | int    | bps  |

### Get_LivePlayStat
The output of Get_LivePushStat is another subset of Get_LiveStat:

| Field name             | Description               | Type     | Remarks                 |
| --------------- | ---------------- | ------ | ------------------ |
| stream_count | Number of all online LVB streams | int | 1 returned when stream_id is specified in the request |
| stream_info     | LVB stream statistics          | array  | Details               |
| total_bandwidth | Total bandwidth for the current account upon query | double | Unit: Mbps |
| total_online    | Total number of online persons for the current account upon query | int    | Unit: Person               |

The stream_info content is:

| Field name         | Description          | Type     | Remarks      |
| ----------- | ----------- | ------ | ------- |
| stream_name | LVB ID         | string | -       |
| bandwidth | Instantaneous bandwidth occupied of the LVB stream | double | Unit: Mbps |
| online      | Number of instantaneous online persons for the current account upon query | int    | Unit: Person    |

## 4. Call Examples

Purpose: To query push and play information about all video streams that are in the LVB state under the current account.

| Component              | Example                                     |
| ----------------- | ---------------------------------------- |
| API URL             | http://statcgi.video.qcloud.com/common_access? |
| cmd               | 1234                                     |
| interface         | Get_LiveStat                             |
| Param.n.page_no   | 1                                        |
| Param.n.page_size | 20                                       |
| t                 | 1471850187                               |
| sign              | b17971b51ba0fe5916ddcd96692e9fb3         |

```
// When copying them, please remove invisible line feeds used for beautifying layout. Otherwise, "cmd is invalid" or other URL assembly errors may occur
URL = http://statcgi.video.qcloud.com/common_access?
			cmd=1234&interface=Get_LiveStat
			&Param.n.page_no=1
			&Param.n.page_size=20
			&t=1471850187&sign=b17971b51ba0fe5916ddcd96692e9fb3
```







## 金融云接口异同

### 整体表现

金融云的 region 视作一个普通的公有云 region，因此在对 `service.cos.myqcloud.com` 发起查询时，需支持返回 ap-shanghai-fsi 或 ap-shenzhen-fsi。

需同时支持使用 PathStyle 和 HostStyle 发起请求，需支持 COS XML、AWSv2、AWSv4 签名方式。

### Service 接口

#### GET Service

对 PathStyle 发起请求时，只返回当前地域的存储桶列表。

### Bucket 接口

#### ACL

PUT/GET Bucket ACL 操作许可的范围仅包括 anonymous 或 OwnerUin。

Bucket ACL 可定义的操作为：

| 操作名       | 含义                             |
| ------------ | -------------------------------- |
| READ         | 允许被授权者列出对象             |
| WRITE        | 允许被授权者创建、覆盖和删除对象 |
| READ_ACP     | 允许被授权者读取存储桶 ACL       |
| WRITE_ACP    | 允许被授权者写入存储桶 ACL       |
| FULL_CONTROL | 允许被授权者拥有以上四个操作权限 |

其中默认的选项和含义为：

| 默认选项          | 实际含义                                      | 含义描述                                                     |
| ----------------- | --------------------------------------------- | ------------------------------------------------------------ |
| private           | grant-full-control: OwnerUin                  | 存储桶拥有者 OwnerUin 将具有 FULL_CONTROL，此条为默认选项，始终生效 |
| public-read       | grant-read: anonymous                         | 额外赋予匿名用户列出对象的操作权限                           |
| public-read-write | grant-read: anonymous, grant-write: anonymous | 额外赋予匿名用户列出对象和写入对象的操作权限                 |

#### List Objects

响应体中 StorageClass 字段只返回 STANDARD。

### Object 接口

#### 通用不支持项目

通用不支持项目频繁出现在几乎所有对象的操作上，因此对于通用区别不再细数。

- x-cos-storage-class：因为暂不不提供其他存储类型，该选项默认为 STANDARD 时无需在头部返回。
- x-cos-object-type：因为追加上传模式不被推荐支持。
- x-cos-version-id：因为版本控制功能暂不计划支持。
- x-cos-server-side-encryption：因为服务端加密功能暂不计划支持。
- x-cos-acl：请在 ACL 章节查看有关定义和详述。

#### PUT Object - Copy

响应头中指定的源地址修改为 /存储桶名称/对象键名称，暂不支持跨区域的 Copy 行为。

#### ACL

PUT/GET Object ACL 操作许可的范围仅包括 anonymous 或 OwnerUin。

Object Owner 定义和含义：

| Owner | 说明                                                         |
| ----- | ------------------------------------------------------------ |
| 空    | 对象的 Owner 默认内容为空，在该情况下存储桶拥有者始终具备 FULL_CONTROL。 |
| 非空  | 对象的 Owner 非空意味着对象的拥有者与存储桶拥有者并非同一根账户，此时对象 Owner 所申明的身份默认具备 FULL_CONTROL。 |

Object ACL 可定义的操作为：

| 操作名       | 含义                             |
| ------------ | -------------------------------- |
| READ         | 允许被授权者读取对象内容         |
| WRITE        | 不支持                           |
| READ_ACP     | 允许被授权者读取对象 ACL         |
| WRITE_ACP    | 允许被授权者写入对象 ACL         |
| FULL_CONTROL | 允许被授权者拥有以上四个操作权限 |

其中默认的选项和含义为：

| 默认选项          | 实际含义                                      | 含义描述                                                     |
| ----------------- | --------------------------------------------- | ------------------------------------------------------------ |
| default           | 空记录                                        | 对象 OwnerUin 将具有 FULL_CONTROL，Owner 为空时，其默认返回存储桶 OwnerUin。除 OwnerUin 外，经过授权上下文的用户可以访问对象。此条为默认选项。 |
| private           | 私有访问                                      | 额外拒绝非对象拥有者的其他人访问权限，即使授权上下文已许可访问。 |
| public-read       | grant-read: anonymous                         | 额外赋予匿名用户列出对象的操作权限。                         |
| public-read-write | grant-read: anonymous, grant-write: anonymous | 额外赋予匿名用户列出对象和写入对象的操作权限。               |
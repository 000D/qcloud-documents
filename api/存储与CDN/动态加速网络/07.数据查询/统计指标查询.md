## 接口描述
本接口用于查询指定时间段内的域名访问统计指标，您可以利用此接口查询域名的访问情况。
接口请求域名：<font style="color:red">dsa.api.qcloud.com</font>   

>
- 该接口调用频次上限为 100 次/分钟，请勿高频调用  
- 可一次查询多个项目或多个域名，分域名展示汇总用量数据

### 统计指标说明
| 统计指标 |  指标名称 | 指标说明  |
| ------- | ------ |
| 总流量      |  flux   | 按域名维度统计查询时间段内的流量总和，单位:Byte |
| 峰值带宽    | bandwidth | 按域名维度统计查询时间段内的峰值带宽，单位:bps  |
| 总请求次数   | request | 按域名维度统计查询时间段内的请求次数总和，单位:次数 |
| 平均访问延时  | delay | 按域名维度统计查询时间段内的平均访问延时，单位:ms |

## 输入参数
以下请求参数列表仅列出了接口请求参数，正式调用时需要加上[公共请求参数](https://cloud.tencent.com/document/product/570/13932 "点击查看公共请求参数")，见公共请求参数页面，此接口的Action字段为<font style="color:red">GetDsaHostStatistics</font>。   

|参数名称 |  必选  |    类型   | 取值示例  |  描述  |
| ------ | ----------| ----------| ------- |
| metrics | 是  | String | flux | 统计指标名称，见上文“统计指标说明” |
| projects | 否 | String | default |项目列表，当根据项目查询数据时使用，按json格式提交项目名称 |
| hosts |    否     | String  | test.qcloud.com | 域名列表，当根据域名查询数据时使用，按json格式提交域名名称 |
| startDate |    否     | String  | 2018-04-19 | 开始时间，年月日型|
| endDate| 否 |  String   | 2018-04-20 | 结束时间，年月日型|
| offset | 否 | Unsigned | 15 | 查询偏移个数 |
| length | 否 | Unsigned | 10 | 本次查询长度 |

>   
- 开始时间或结束时间为空时，默认返回查询当日统计数据  
- 未指定查询目标时，默认按照账号维度查询全部域名的合并统计数据
- 当查询多个项目或多个域名时，为了防止查询参数过长导致URL越界，建议采用POST方式提交请求 
- 当账号下域名较多时，您可以通过offset和length参数设置分段查询，查询域名按照metrics指定的第一个指标倒序排列

## 输出参数
|参数名称|类型|描述|
|------ | ----------| ----------|
|code|Int|公共错误码，0 表示成功，其他值表示失败。详见错误码页面的 [公共错误码](https://cloud.tencent.com/document/product/570/13937 "点击查看公共错误码")。|
|message|String|模块错误信息描述，与接口相关|
|codeDesc|String|英文错误信息，或业务侧错误码。|
|data|Array| 详细查询数据信息，详细说明见下文|

#### data 字段说明
|参数名称|类型|描述|
|------ | -----| -----| 
| host | String | 域名名称，如：dsatest.qcloud.com |
| flux | Unsigned | 总流量值  |
| bandwidth | Unsigned | 峰值带宽值 |
| request | Unsigned | 总请求次数 |
| delay | Unsigned | 平均访问时延 |

## 接口调用示例 
### 1. 配置需求示例 
查询账号下全部域名2018-04-17的流量、带宽和请求次数统计数据。
### 2. GET 请求

GET 请求需要将所有参数都加在 URL 后：

```
https://dsa.api.qcloud.com/v2/index.php?
Action=GetDsaHostStatistics
&SecretId=XXXXXXXXXXXXXXXXXXXXXXXXXXX
&Timestamp=1524279600
&Nonce=123456789
&Signature=XXXXXXXXXXXXXXXXXXXXXXXXXXXXX
&metrics=[bandwidth]
&startDate=2018-04-17
&endDate=2018-04-17
```

> 为了防止查询参数过长，导致URL越界，该接口默认采用POST方式提交查询请求。

### 3. POST请求
POST请求时，参数填充在HTTP Request-body 中，请求地址：
```
https://dsa.api.qcloud.com/v2/index.php  
```
参数支持 form-data、x-www-form-urlencoded 等格式，参数数组如下： 
```
array (
  'Action' => 'GetDsaStatistics',
  'SecretId' => 'SecretId',
  'Timestamp' => 1524279600,
  'Nonce' => 123456789,
  'Signature' => 'Signature',
  'metrics' => '["flux","bandwidth","request"]'，
  'startDate' => "2018-04-17"
  'endData' => "2018-04-17"
)
```
### 4. 返回结果示例
#### 查询成功
```
{
	"code": 0,
	"message": "",
	"codeDesc": "Success",
	"data": {
		{
            "host": "a.dsa.qcloud.com",
			"flux":265412354,
            "bandwidth": 589746515,
			"request":123456548
        },
 		......
        {
            "host": "b.dsa.qcloud.com",
			"flux":362124545,
            "bandwidth": 749516585,
			"request":156534248
        }
	}
}
```
#### 查询失败
```
{
    "code": 4100,
    "message": "鉴权失败，请参考文档中鉴权部分。",
    "codeDesc": "AuthFailure"
}
```

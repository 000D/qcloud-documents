## 1. 接口描述
 
本接口 (CreateCluster) 用于创建集群

接口请求域名：<font style="color:red">ccs.api.qcloud.com</font>

* 创建集群时，需要指定集群中节点（云主机）的数量与配置。
* 集群中所有节点为普通云盘
* 一个账户默认只能创建5个集群，可以[提交工单](https://console.qcloud.com/workorder/category/create?level1_id=6&level2_id=350&level1_name=%E8%AE%A1%E7%AE%97%E4%B8%8E%E7%BD%91%E7%BB%9C&level2_name=%E5%AE%B9%E5%99%A8%E6%9C%8D%E5%8A%A1CCS)增加配额。
* 一个集群限20个节点,可以[提交工单](https://console.qcloud.com/workorder/category/create?level1_id=6&level2_id=350&level1_name=%E8%AE%A1%E7%AE%97%E4%B8%8E%E7%BD%91%E7%BB%9C&level2_name=%E5%AE%B9%E5%99%A8%E6%9C%8D%E5%8A%A1CCS)增加配额,同时也要符合[CVM实例购买限制](https://www.qcloud.com/doc/product/213/CVM%E5%AE%9E%E4%BE%8B%E8%B4%AD%E4%B9%B0%E9%99%90%E5%88%B6)文档所描述的总体数量限制。
* CPU与内存具体的**配比限制**参见[此页面](https://www.qcloud.com/doc/product/213/CVM%E5%AE%9E%E4%BE%8B%E9%85%8D%E7%BD%AE)。
* 如需要更改带宽，请在实例创建成功后，使用接口 [UpdateInstanceBandwidthHour](https://www.qcloud.com/doc/api/229/1345) 更改，<font style="color:red">**公网带宽不指定默认为0**</font>。
* 支持的实例类型<font style="color:red">**(每个可用区购买的机型不相同)，**</font>详情参见[此页面](https://www.qcloud.com/doc/product/213/CVM%E5%AE%9E%E4%BE%8B%E9%85%8D%E7%BD%AE)：

| 机型| 系列1 | 系列2 |
|---------|---------|---------|
| 标准型| CVM.S1| CVM.S2|
| 高IO型| CVM.I1| CVM.I2|
| 标准型| CVM.M1| CVM.M2|
| 计算型| -| CVM.C2|

## 2. 输入参数

以下请求参数列表仅列出了接口请求参数，其它参数见[公共请求参数](https://www.qcloud.com/document/api/457/9463)页面。

| 参数名称 | 是否必选  | 类型 | 描述 |
|---------|---------|---------|---------|
| clusterName| 是| String|集群名称|
| clusterDesc| 否| String|集群描述|
| clusterCIDR| 是| String|用于分配集群容器和服务IP的CIDR，不得与VPC CIDR冲突，也不得与同VPC内其他集群CIDR冲突|
| ignoreClusterCIDRConflict | 否| Int|1：忽略冲突（继续创建），0：不忽略冲突（并返回错误）；是否忽略clusterCIDR冲突错误，默认为1|
| zoneId| 是| Int|[可用区](https://www.qcloud.com/document/api/213/1286)ID。|
| goodsNum| 是| Int| 购买实例数量。最大100|
| cpu| 是| Int| CPU核数，具体限制见上。 |
| mem| 是| Int| 内存大小(GB)，具体限制见上。 |
| osName| 是| String| 系统名。centos7.2x86_64 或者 ubuntu16.04.1 LTSx86_64，集群下所有节点都使用此系统，扩展节点也会自动使用此系统。|
| instanceType| 否| String|实例类型（例如高IO机型等）。默认为CVM.S1。更多实例类型，可在上文查看“实例类型”一节。|
| cvmType| 否| String|主机的类型。<br>PayByHour：按量计费  <br>PayByMonth：包年包月<br>默认按量计费<br>|
| bandwidthType| 是| String|带宽的类型。<br>包年包月主机：PayByMonth：按带宽使用时长计费，PayByTraffic：按流量计费。<br> 按量计费主机：PayByHour：按带宽使用时长计费，PayByTraffic：按流量计费<br>网络计费模式的区别可以参看[购买网络带宽](https://www.qcloud.com/doc/product/213/509)。|
| bandwidth| 是| Int| 公网带宽(Mbps)，当按流量计费时为公网带宽峰值。|
| wanIp| 否| Int| 是否开通公网IP。1：开通，0：不开通。bandwidth大于0，可自由选择开通与否，默认开通公网IP；bandwidth为0，则不分配公网IP。|
| vpcId| 是| String| 私有网络ID。请填写[查询私有网络列表](https://www.qcloud.com/document/api/215/1372)接口中返回的unVpcId(私有网络统一ID)字段。|
| subnetId| 是| String|  子网ID。请填写[查询子网列表](https://www.qcloud.com/document/api/215/1371)接口中返回的unSubnetId(子网统一ID)字段。 |
| isVpcGateway| 是| Int| 是否是[公网网关](https://www.qcloud.com/doc/product/215/3089#3.-.E5.90.91.E7.A7.81.E6.9C.89.E7.BD.91.E7.BB.9C.E4.B8.AD.E6.B7.BB.E5.8A.A0.E5.85.AC.E7.BD.91.E7.BD.91.E5.85.B3。)。0：非公网网关；1：公网网关；公网网关只有在拥有公网IP以及处于私有网络下时才能正常使用。|
| rootSize| 是| Int| 系统盘大小（GB）。<br>linux系统调整范围为20-50G，步长为1，默认为20G。Windows不可调整，默认为50G。系统盘类型与storageType所指定的一致。|
| storageSize| 是| Int| 数据盘大小(GB)。步长为10，0表示不要数据盘。关于磁盘的最大大小请参考[硬盘产品简介](https://www.qcloud.com/doc/product/213/498)。|
| password| 否| String| 实例密码。未设置则为随机产生，并通过站内信下发。linux实例密码必须8到16位，至少包括两项[a-z，A-Z]、[0-9] 和 [( ) &#96; ~ ! @ # $ % ^ & * - + = &#124; { } [ ] : ; ' < > , . ? / ]中的特殊符号。Windows实例密码必须12到16位，至少包括三项[a-z]，[A-Z]，[0-9] 和 [( ) &#96; ~ ! @ # $ % ^ & * - + = { } [ ] : ; ' , . ? /]中的特殊符号。|
| keyId| 否| String| [密钥](https://www.qcloud.com/doc/product/213/503)ID。关联密钥后可使用密钥登录实例，keyId 可通过接口[查询密钥](http://www.qcloud.com/doc/api/229/%E6%9F%A5%E8%AF%A2%E5%AF%86%E9%92%A5)获取，密钥与密码不能同时指定，同时 Windows 操作系统不支持指定密钥。|

## 3. 输出参数
 
| 参数名称 | 类型 | 描述 |
|---------|---------|---------|
| code | Int | 公共错误码。0表示成功，其他值表示失败。详见错误码页面的公共错误码。|
| message | String | 模块错误信息描述，与接口相关。详见错误码页面的模块错误码。|
| requestId|Int |任务Id |
| clusterId|Int |集群Id |



 

## 4. 示例
 
输入

```
  https://domain/v2/index.php?Action=CreateCluster
  &imageId=1
  &bandwidth=1
  &cpu=1
  &mem=2
  &storageType=1
  &storageSize=50
  &goodsNum=1
  &zoneId=1
  &vpcId=vpc-8e0ypm3z 
  &subnetId=subnet-3lzrkspo 
  &<公共请求参数>
```
输出

```
  {
      "code" : 0,
      "message" : "ok",
      "data":{
	      "clusterId":"cluster-xxxx",
	      "requestId":11333
      }
      
  }

```
## 1. 接口描述
本接口（DescribeTdsqlSlowLogs）用于查询慢查询日志列表。
接口请求域名：**_tdsql.api.qcloud.com_**

## 2. 输入参数
以下请求参数列表仅列出了接口请求参数，正式调用时需要加上公共请求参数，见[公共请求参数](/doc/api/309/7016)页面。
其中，此接口的 Action 字段为 DescribeTdsqlSlowLogs。


| 参数名称| 类型| 是否必选| 描述|
|---------|---------|---------|---------|
| Version|String|是|表示 API 版本号，主要用于标识请求的不同 API 版本。 本接口第一版本可传：2017-03-12。|
| CdbInstanceId| Strings | 是 |实例 ID|
| StartTime | datetime |否 |  查询的起始时间，形如 2016-07-23 14:55:20|
| EndTime | datetime |否 |  查询的结束时间，形如 2016-08-22 14:55:20|
| Offset| Integer| 是| 偏移量，默认为 0。关于 `Offset` 的更进一步介绍请参考 API [简介](/doc/api/237/2246#.E8.BE.93.E5.85.A5.E5.8F.82.E6.95.B0.E4.B8.8E.E8.BF.94.E5.9B.9E.E5.8F.82.E6.95.B0.E9.87.8A.E4.B9.89)中的相关小节。|
| Limit| Integer| 是| 返回数量，默认为 20，最大值为 100。关于 `Limit` 的更进一步介绍请参考 API [简介](/doc/api/237/2246#.E8.BE.93.E5.85.A5.E5.8F.82.E6.95.B0.E4.B8.8E.E8.BF.94.E5.9B.9E.E5.8F.82.E6.95.B0.E9.87.8A.E4.B9.89)中的相关小节。|
| Db | String | 否 | 要查询的慢查询语句对应的数据库名称。|
| OrderBy | String | 否 | 排序字段，query_time_sum 或者 query_count。 |
| OrderByType | String | 否 |排序类型， desc 或者 asc。|
| Slave | Integer | 否 | 为1时获取从机慢查询。取值只能为0或者1，不填则表示0。|

## 3. 输出参数
| 参数名称 | 类型 | 描述 |
|---------|---------|---------|
| RequestId| String| 唯一请求 ID。每次请求都会返回 `RequestId`。当用户调用接口失败找后台研发人员处理时需提供该 `RequestId`。|
| LockTimeSum | Integer | 所有语句锁时间总和 | 
| QueryCount | Integer | 所有语句查询总次数 | 
| QueryTimeSum | Float | 所有语句查询时间总和 | 
| Total | Integer | 总记录数 | 
| Data | Array | 数据|
| Data.CheckSum | String | 语句校验和,用于查询详情|
| Data.Db | String | 数据库名称 |
| Data.FingerPrint| String| 抽象的SQL语句 |
| Data.LockTimeAvg| String| 平均的锁时间 |
| Data.LockTimeMax| String| 最大锁时间 |
| Data.LockTimeMin| String| 最小锁时间 |
| Data.LockTimeSum| String| 锁时间总和 |
| Data.QueryCount| String| 查询次数 |
| Data.QueryTimeAvg| String| 平均查询时间 |
| Data.QueryTimeMax| String| 最大查询时间 |
| Data.QueryTimeMin| String| 最小查询时间 |
| Data.QueryTimeSum| String| 查询时间总和 |
| Data.RowsExaminedSum| String| 扫描行数 |
| Data.RowsSentSum| String| 发送行数 |
| Data.TsMax| String| 首次执行时间 |
| Data.TsMin| String | 最后执行时间|
| Data.User| String| 帐号|

## 4. 错误码表

以下是本接口常见的错误码，如果有不在此列的错误请查阅 [TDSQL 错误码表](/doc/api/309/7150)

| 错误码 | 描述 |
|---------|---------|
| IllegalTime | 错误的时间参数 |
| InnerSystemError | 内部系统错误，和业务无关 |
| DbOperationFailed | DB 内部失败 |
| InstanceAlreadyDeleted | 实例已删除 |
| InstanceStatusAbnormal | 实例状态异常（非删除），不能进行操作 |
| GetInstanceInfoFailed | 获取实例信息失败 |
| LogDBFailed | logDB 接口错误 |
## 5. 示例
输入
<pre>
https://tdsql.api.qcloud.com/v2/index.php?Action=DescribeTdsqlSlowLogs
&<<a href="https://cloud.tencent.com/doc/api/229/6976">公共请求参数</a>>
&Version=2017-03-12
&CdbInstanceId=tdsql-fdpjf5zh
&Offset=0
&Limit=20
&StartTime=2016-07-23 14:55:20
&EndTime=2016-08-22 14:55:20
</pre>
输出
```
{
    "Response": {
        "RequestId": "eac6b301-a322-493a-8e36-83b295459397",
        "Data":[
            {
                "CheckSum":"14090621765287179955",
                "Db":"",
                "Fingerprint":"replace into sysdb.statustable set ts = from_unixtime(?),ip=?,port=?",
                "LockTimeAvg":"0.00",
                "LockTimeMax":"0.00",
                "LockTimeMin":"0.00",
                "LockTimeSum":"0.00",
                "QueryCount":"1",
                "QueryTimeAvg":"1.13",
                "QueryTimeMax":"1.13",
                "QueryTimeMin":"1.13",
                "QueryTimeSum":"1.13",
                "RowsExaminedSum":"0.00",
                "RowsSentSum":"0.00",
                "TsMax":"2016-08-06 11:32:10",
                "TsMin":"2016-08-06 11:32:10",
                "User":"agent"
            }
        ],
        "LockTimeSum":0,
        "QueryCount":1,
        "QueryTimeSum":1.13,
        "Total":1
    }
}
```

